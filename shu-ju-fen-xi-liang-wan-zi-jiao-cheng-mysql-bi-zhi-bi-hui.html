<!DOCTYPE HTML>
<html lang="zh-CN">


<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="keywords" content="[两万字教程]MYSQL必知必会一站式完全教程, seek">
    <meta name="baidu-site-verification" content="fmlEuI34ir">
    <meta name="google-site-verification" content="yCy2azpds5XSuGZvis6OuA-XIGF5GuGpYRAaGfD6o48">
    <meta name="360-site-verification" content="b7c11a830ef90fd1464ad6206bb7b6e7">
    <meta name="description" content="引言此文是针对《MYSQL必知必会》一书学习的笔记与总结，注意要点的提示，文末会放上总的思维导图，该文除了对整书的脉络与知识点整理外，还有一些个人的总结见解，比如基本概念-mysql语句的法则与执行顺序，是通过阅读借鉴与实践再经过个人总结，">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>[两万字教程]MYSQL必知必会一站式完全教程 | Bevis23&#39;s Blog</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
    <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?ce84511d3df71640a9378a69f6293044";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

    
        <script>
            (function(){
                var bp = document.createElement('script');
                var curProtocol = window.location.protocol.split(':')[0];
                if (curProtocol === 'https') {
                    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
                }
                else {
                    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                }
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(bp, s);
            })();
        </script>
    

    <script>
        (function(){
        var src = "https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba";
        document.write('<script src="' + src + '" id="sozz"><\/script>');
        })();
    </script>

<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body>

    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Bevis23's Blog</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>关于我</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>友链</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/contact" class="waves-effect waves-light">
            
            <i class="fa fa-comments"></i>
            
            <span>留言板</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/navigate" class="waves-effect waves-light">
            
            <i class="fa fa-location-arrow"></i>
            
            <span>极客导航</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/everyday" class="waves-effect waves-light">
            
            <i class="fa fas fa-list"></i>
            
            <span>每日60s</span>
        </a>
    </li>
    
    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="搜索"></i>
        </a>
    </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Bevis23's Blog</div>
        <div class="logo-desc">
            
            永远保持好奇心，去探索，去直面自己的感受，面对万物渐变，宓而待之，追翊于廖廓，终有所感，终有所得......
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                关于我
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                友链
            </a>
        </li>
        
        <li>
            <a href="/contact" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-comments"></i>
                
                留言板
            </a>
        </li>
        
        <li>
            <a href="/navigate" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-location-arrow"></i>
                
                极客导航
            </a>
        </li>
        
        <li>
            <a href="/everyday" class="waves-effect waves-light">
                
                <i class="fa fa-fw fas fa-list"></i>
                
                每日60s
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/Bevis23/Bevis23.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/Bevis23/Bevis23.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/25.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        [两万字教程]MYSQL必知必会一站式完全教程
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;

    }

    #toc-content {
    height: calc(100vh - 200px);
    overflow-y: scroll;

    }
    /* 添加滚动条样式 */
::-webkit-scrollbar {
  width: 8px; /* 滚动条宽度 */
}

::-webkit-scrollbar-track {
  background-color: #f1f1f1; /* 滚动条背景颜色 */
}

::-webkit-scrollbar-thumb {
  background-color: #888; /* 滚动条拖动块颜色 */
  border-radius: 4px; /* 滚动条拖动块圆角 */
}

::-webkit-scrollbar-thumb:hover {
  background-color: #555; /* 鼠标悬停时的滚动条拖动块颜色 */
}

/* 开启滚动条显示 */
overflow-y: scroll;


    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 20px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                        <a href="/tags/技术分享/" target="_blank">
                            <span class="chip bg-color">技术分享</span>
                        </a>
                        
                        <a href="/tags/数据分析/" target="_blank">
                            <span class="chip bg-color">数据分析</span>
                        </a>
                        
                        <a href="/tags/mysql/" target="_blank">
                            <span class="chip bg-color">mysql</span>
                        </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                        <a href="/categories/数据分析/" class="post-category" target="_blank">
                            数据分析
                        </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-07-14
                </div>

                <div class="post-author info-break-policy">
                    <i class="fa fa-user-o fa-fw"></i>作者:&nbsp;&nbsp;
                    
                    Bevis23
                    
                </div>

                
                
                <div class="info-break-policy">
                    <i class="fa fa-file-word-o fa-fw"></i>文章字数:&nbsp;&nbsp;
                    22k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="fa fa-clock-o fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    82 分
                </div>
                
                

                
                <div id="busuanzi_container_page_pv" class="info-break-policy">
                    <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                    <span id="busuanzi_value_page_pv"></span>
                </div>
                
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>此文是针对《MYSQL必知必会》一书学习的笔记与总结，注意要点的提示，<u>文末会放上总的思维导图</u>，该文除了对整书的脉络与知识点整理外，还有一些个人的总结见解，比如基本概念-mysql语句的法则与执行顺序，是通过阅读借鉴与实践再经过个人总结，后续且会不断更新本文，为写出更好的mysql语句 ^_^</p>
<h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><h2 id="什么是数据库？"><a href="#什么是数据库？" class="headerlink" title="什么是数据库？"></a>什么是数据库？</h2><p>一个以某种有组织的方式存储的数据集合，数据库（database） 保存有组织的数据的容器</p>
<p>数据库由表组成，行/列数据，数据类型；主键（primary key）一一列（或一组列），其值能够唯一区分表中每个行</p>
<h2 id="数据库术语"><a href="#数据库术语" class="headerlink" title="数据库术语"></a>数据库术语</h2><ul>
<li>数据库（database） - 保存有组织的数据的容器（通常是一个文件或一组文件）。</li>
<li>数据表（table） - 某种特定类型数据的结构化清单。</li>
<li>模式（schema） - 关于数据库和表的布局及特性的信息。模式定义了数据在表中如何存储，包含存储什么样的数据，数据如何分解，各部分信息如何命名等信息。数据库和表都有模式。</li>
<li>列（column） - 表中的一个字段。所有表都是由一个或多个列组成的。</li>
<li>行（row） - 表中的一个记录。</li>
<li>主键（primary key） - 一列（或一组列），其值能够唯一标识表中每一行</li>
</ul>
<h2 id="什么是SQL？"><a href="#什么是SQL？" class="headerlink" title="什么是SQL？"></a>什么是SQL？</h2><p>SQL是结构化查询语言（Structured Query  Language）的缩写。SQL是一种专门用来与数据库通信的语言</p>
<blockquote>
<p>语法结构：</p>
<p>1分号结尾、2不区分大小写、3字符要加单引号、4字段或参数间用逗号分割</p>
<ul>
<li><p>SQL 支持三种注释 </p>
<p> ## 注释1<br>– 注释2<br>/<em> 注释3 </em>/ </p>
</li>
<li><p>子句 - 是语句和查询的组成成分。（在某些情况下，这些都是可选的。）</p>
</li>
<li><p>表达式 - 可以产生任何标量值，或由列和行的数据库表</p>
</li>
<li><p>谓词 - 给需要评估的 SQL 三值逻辑（3VL）（true/false/unknown）或布尔真值指定条件，并限制语句和查询的效果，或改变程序流程。</p>
</li>
<li><p>查询 - 基于特定条件检索数据。这是 SQL 的一个重要组成部分。</p>
</li>
<li><p>语句 - 可以持久地影响纲要和数据，也可以控制数据库事务、程序流程、连接、会话或诊断。</p>
</li>
</ul>
</blockquote>
<h2 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h2><h3 id="数据定义语言（DDL）"><a href="#数据定义语言（DDL）" class="headerlink" title="数据定义语言（DDL）"></a>数据定义语言（DDL）</h3><p>数据定义语言（Data Definition Language，DDL）是 SQL 语言集中负责数据结构定义与数据库对象定义的语言。</p>
<p>DDL 的主要功能是定义数据库对象。</p>
<p>DDL 的核心指令是 CREATE、ALTER、DROP。</p>
<h3 id="数据操纵语言（DML）"><a href="#数据操纵语言（DML）" class="headerlink" title="数据操纵语言（DML）"></a>数据操纵语言（DML）</h3><p>数据操纵语言（Data Manipulation Language, DML）是用于数据库操作，对数据库其中的对象和数据运行访问工作的编程语句。</p>
<p>DML 的主要功能是 访问数据，因此其语法都是以读写数据库为主。</p>
<p>DML 的核心指令是 INSERT、UPDATE、DELETE、SELECT。这四个指令合称 CRUD(Create, Read, Update, Delete)，即增删改查。</p>
<h3 id="事务控制语言（TCL）"><a href="#事务控制语言（TCL）" class="headerlink" title="事务控制语言（TCL）"></a>事务控制语言（TCL）</h3><p>事务控制语言 (Transaction Control Language, TCL) 用于管理数据库中的事务。这些用于管理由 DML 语句所做的更改。它还允许将语句分组为逻辑事务。</p>
<p>TCL 的核心指令是 COMMIT、ROLLBACK。</p>
<h3 id="数据控制语言（DCL）"><a href="#数据控制语言（DCL）" class="headerlink" title="数据控制语言（DCL）"></a>数据控制语言（DCL）</h3><p>数据控制语言 (Data Control Language, DCL) 是一种可对数据访问权进行控制的指令，它可以控制特定用户账户对数据表、查看表、预存程序、用户自定义函数等数据库对象的控制权。</p>
<p>DCL 的核心指令是 GRANT、REVOKE。</p>
<p>DCL 以控制用户的访问权限为主，因此其指令做法并不复杂，可利用 DCL 控制的权限有：CONNECT、SELECT、INSERT、UPDATE、DELETE、EXECUTE、USAGE、REFERENCES。</p>
<p>根据不同的 DBMS 以及不同的安全性实体，其支持的权限控制也有所不同。</p>
<h2 id="什么是MYSQL？"><a href="#什么是MYSQL？" class="headerlink" title="什么是MYSQL？"></a>什么是MYSQL？</h2><p>MySQL是一种开源的关系型数据库管理系统（RDBMS），它是最流行和广泛使用的数据库之一。MySQL由瑞典公司MySQL AB开发，并在2008年被甲骨文公司收购。它支持多用户、多线程和多个存储引擎，可以在各种操作系统上运行。</p>
<p>MySQL具有以下特点：</p>
<ol>
<li><p>可靠性：MySQL以其稳定性和可靠性而闻名。它经过广泛测试和验证，被许多大型组织和网站用于处理大量数据。</p>
</li>
<li><p>性能：MySQL被设计为高性能数据库。它采用了各种优化技术，如索引、查询缓存和内存管理，以提供快速的数据访问和处理能力。</p>
</li>
<li><p>可扩展性：MySQL支持水平和垂直扩展。水平扩展通过分布式架构和数据分片来增加系统的容量和吞吐量。垂直扩展通过增加硬件资源（如CPU、内存）来提高单个服务器的性能。</p>
</li>
<li><p>简单易用：MySQL提供了简单而直观的命令和语法，使得数据库的管理和查询变得容易。它还提供了丰富的图形界面工具和API，方便开发人员进行数据库操作。</p>
</li>
<li><p>兼容性：MySQL遵循SQL标准，并提供了广泛的功能和特性，包括事务支持、触发器、存储过程和视图等。它还支持多种编程语言和开发框架。</p>
</li>
</ol>
<h2 id="MYSQL工具"><a href="#MYSQL工具" class="headerlink" title="MYSQL工具"></a>MYSQL工具</h2><ol>
<li>MySQL命令实用工具： 通过mysql的基础命令操作使用数据库</li>
<li>phpMyAdmin： phpMyAdmin是一个基于Web的MySQL数据库管理工具，它提供了一个易于使用的界面来管理数据库。通过phpMyAdmin，你可以执行SQL查询、导入和导出数据、创建和修改表结构、用户管理等。它支持多语言和跨平台，并且具有良好的扩展性，可以通过插件来增加额外的功能。phpMyAdmin是一个开源工具，广泛应用于各种Web开发项目中。</li>
<li>Navicat for MySQL：Navicat for MySQL是一款强大的数据库管理和开发工具，适用于MySQL和MariaDB。它提供了直观的用户界面，使得用户可以轻松地进行数据库设计、数据导入导出、SQL查询和脚本编写等操作。Navicat for MySQL支持多个平台，并且具有高级的数据可视化和报表生成功能。此外，它还提供了团队协作和版本控制的特性，方便多人共同开发和管理数据库。</li>
</ol>
<h2 id="使用MYSQL"><a href="#使用MYSQL" class="headerlink" title="使用MYSQL"></a>使用MYSQL</h2><h3 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h3><p>主机名（计算机名）——如果连接到本地MySQL服务器，为localhost； </p>
<p>端口（如果使用默认端口3306之外的端口）；</p>
<p> 一个合法的用户名； </p>
<p>用户口令（如果需要）；</p>
<h3 id="选择与了解"><a href="#选择与了解" class="headerlink" title="选择与了解"></a>选择与了解</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">show</span> <span class="token keyword">database</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">#查看数据库</span>
<span class="token keyword">use</span> <span class="token keyword">database</span>；    <span class="token comment" spellcheck="true">#使用数据库</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">#查看表</span>
<span class="token keyword">show</span> <span class="token keyword">status</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">#查看广泛的服务器状态信息</span>
<span class="token keyword">show</span> grants<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">#显示授予用户的安全权限</span>
<span class="token keyword">show</span> error<span class="token punctuation">;</span>    <span class="token keyword">show</span> <span class="token keyword">warnings</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">#显示服务器错误或警告消息</span>

help <span class="token keyword">show</span>；    <span class="token comment" spellcheck="true">#查看show的使用帮助</span></code></pre>
<blockquote>
<p>什么是自动增量？ 某些表列需要唯一值。例如，订单编号\雇员ID或（如上面例子中所示的顾客ID。在每个行添加到表 中时，MySQL可以自动地为每个行分配下一个可用编号，不用在添加一行时手动分配唯一值（这样做必须记住最后一次使 用的值）这个功能就是所谓的自动增量。如果需要它，则必须在用CREATE语句创建表时把它作为表定义的组成部分。</p>
</blockquote>
<h2 id="MYSQL语句的法则！！"><a href="#MYSQL语句的法则！！" class="headerlink" title="MYSQL语句的法则！！"></a>MYSQL语句的法则！！</h2><h3 id="书写顺序与执行顺序！！"><a href="#书写顺序与执行顺序！！" class="headerlink" title="书写顺序与执行顺序！！"></a>书写顺序与执行顺序！！</h3><pre class=" language-sql"><code class="language-sql"><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token keyword">DISTINCT</span><span class="token operator">&lt;</span>Select_list<span class="token operator">></span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token operator">&lt;</span>left_table<span class="token operator">></span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span>join_type<span class="token operator">></span><span class="token keyword">JOIN</span><span class="token operator">&lt;</span>right_table<span class="token operator">></span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">ON</span><span class="token operator">&lt;</span>join_condition<span class="token operator">></span>
<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">WHERE</span><span class="token operator">&lt;</span>where_condition<span class="token operator">></span>
<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span><span class="token operator">&lt;</span>group_by_list<span class="token operator">></span>
<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">WITH</span> {CUBE<span class="token operator">|</span>ROLLUP}
<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token keyword">HAVING</span><span class="token operator">&lt;</span>having_condtion<span class="token operator">></span>
<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span><span class="token operator">&lt;</span>order_by_list<span class="token operator">></span>
<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">LIMIT</span><span class="token operator">&lt;</span>limit_number<span class="token operator">></span></code></pre>
<p>书写顺序为此排列，执行顺序为（1）~（11）</p>
<p>SELECT子句是必选的，其它子句如WHERE子句、GROUP BY子句等是可选的。一个select语句中，子句的顺序是固定的。必须严格按照上述的顺序书写 </p>
<h3 id="法则："><a href="#法则：" class="headerlink" title="法则："></a>法则：</h3><p>SELECT col,col,col 找什么？ FROM table 从哪找？ WHERE col 条件 条件是啥？</p>
<p>这个法则教你怎么一步步写一个查询SQL，可以当做一种写SQL的思维</p>
<p>简言之，写任何一个查询语句，都分解成3步：</p>
<p>第一步：思考FROM后面的（也即是表）</p>
<p>第二步：思考WHERE条件（查手册就可以）</p>
<p>第三步：完善SELECT后面的（也就是老板要显示的数据）</p>
<h3 id="条件：数字-where"><a href="#条件：数字-where" class="headerlink" title="条件：数字(where)"></a>条件：数字(where)</h3><pre><code>当查找条件col是数字</code></pre><p><code>select * from table where col = 1</code>;</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Condition</th>
<th>SQL Example</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>=, !=, &lt; ,&lt;=, &gt;, &gt;=</td>
<td>Standard numerical operators</td>
<td>col != 4</td>
<td>等于 大于 小于</td>
</tr>
<tr>
<td>BETWEEN … AND …</td>
<td>Number is within range of two values (inclusive)</td>
<td>col BETWEEN 1.5 AND 10.5</td>
<td>在 X 和 X之间</td>
</tr>
<tr>
<td>NOT BETWEEN … AND …</td>
<td>Number is not within range of two values (inclusive)</td>
<td>co NOT BETWEEN 1 AND10</td>
<td>不在 X 和 X之间</td>
</tr>
<tr>
<td>IN (…)</td>
<td>Number exists in a list</td>
<td>col IN (2, 4, 6)</td>
<td>在 X 集合</td>
</tr>
<tr>
<td>NOT IN (…)</td>
<td>Number does not exist in a list</td>
<td>col NOT IN (1, 3, 5)</td>
<td>不在 X 集合</td>
</tr>
</tbody></table>
<h3 id="条件：文本-where"><a href="#条件：文本-where" class="headerlink" title="条件：文本(where)"></a>条件：文本(where)</h3><pre><code>当查找条件col是文本</code></pre><p><code>select * from table where col like &#39;%jin&#39;</code>;</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Condition</th>
<th>SQL Example</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>=</td>
<td>Case sensitive exact string comparison (notice the single equals)</td>
<td>col = “abc”</td>
<td>等于</td>
</tr>
<tr>
<td>!= or &lt;&gt;</td>
<td>Case sensitive exact string inequality comparison</td>
<td>col != “abcd”</td>
<td>不等于</td>
</tr>
<tr>
<td>LIKE</td>
<td>Case insensitive exact string comparison</td>
<td>col LIKE “ABC”</td>
<td>等于</td>
</tr>
<tr>
<td>NOT LIKE</td>
<td>Case insensitive exact string inequality comparison</td>
<td>col NOT LIKE “ABCD”</td>
<td>不等于</td>
</tr>
<tr>
<td>%</td>
<td>Used anywhere in a string to match a sequence of zero or more characters (only with LIKE or NOT LIKE)</td>
<td>col LIKE “%AT%” (matches “AT”, “ATTIC”, “CAT” or even “BATS”)</td>
<td>模糊匹配</td>
</tr>
<tr>
<td>_</td>
<td>Used anywhere in a string to match a single character (only with LIKE or NOT LIKE)</td>
<td>col LIKE “AN_” (matches “AND”, but not “AN”)</td>
<td>模糊匹配单字符</td>
</tr>
<tr>
<td>IN (…)</td>
<td>String exists in a list</td>
<td>col IN (“A”, “B”, “C”)</td>
<td>在集合</td>
</tr>
<tr>
<td>NOT IN (…)</td>
<td>String does not exist in a list</td>
<td>co NOT IN (“D”, “E”, “F”)</td>
<td>不在集合</td>
</tr>
</tbody></table>
<h3 id="排序-rows"><a href="#排序-rows" class="headerlink" title="排序(rows)"></a>排序(rows)</h3><pre><code>需要对结果rows排序和筛选部分rows
select * from table where col &gt; 1 order by col asc limit 2 offset 2</code></pre><table>
<thead>
<tr>
<th>Operator</th>
<th>Condition</th>
<th>SQL Example</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>ORDER BY</td>
<td>.</td>
<td>ORDER BY col ASC/DESC</td>
<td>按col排序</td>
</tr>
<tr>
<td>ASC</td>
<td>.</td>
<td>ORDER BY col ASC/DESC</td>
<td>升序</td>
</tr>
<tr>
<td>DESC</td>
<td>.</td>
<td>ORDER BY col ASC/DESC</td>
<td>降序</td>
</tr>
<tr>
<td>LIMIT OFFSET</td>
<td>.</td>
<td>LIMIT num_limit OFFSET num_offset</td>
<td>从offset取limit</td>
</tr>
<tr>
<td>ORDER BY</td>
<td>.</td>
<td>ORDER BY col1 ASC,col2 DESC</td>
<td>多列排序</td>
</tr>
</tbody></table>
<h3 id="join-连表-table"><a href="#join-连表-table" class="headerlink" title="join:连表(table)"></a>join:连表(table)</h3><pre><code>当查找的数据在多张关联table里
select * from table1 left join table2 on table1.id = table2.id where col &gt; 1</code></pre><table>
<thead>
<tr>
<th>Operator</th>
<th>Condition</th>
<th>SQL Example</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>JOIN .. ON ..</td>
<td>.</td>
<td>t1 JOIN t2 ON t1.id = t2.id</td>
<td>按ID连成1个表</td>
</tr>
<tr>
<td>INNER JOIN</td>
<td>.</td>
<td>t1 INNER JOIN t2 ON t1.id = t2.id</td>
<td>只保留id相等的row</td>
</tr>
<tr>
<td>LEFT JOIN</td>
<td>.</td>
<td>t1 LEFT JOIN t2 ON t1.id = t2.id</td>
<td>保留t1的所有row</td>
</tr>
<tr>
<td>RIGHT JOIN</td>
<td>.</td>
<td>t1 RIGHT JOIN t2 ON t1.id = t2.id</td>
<td>保留t2的所有row</td>
</tr>
<tr>
<td>IS/IS NOT NULL</td>
<td>.</td>
<td>col IS/IS NOT NULL</td>
<td>col是不是为null</td>
</tr>
</tbody></table>
<h3 id="算式-select-where"><a href="#算式-select-where" class="headerlink" title="算式(select / where)"></a>算式(select / where)</h3><pre><code>当需要对select的col 或 where条件的col 经过一定计算后才能使用
select *,col*2 from table where col/2 &gt; 1</code></pre><table>
<thead>
<tr>
<th>Operator</th>
<th>Condition</th>
<th>SQL Example</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>+ - * / %</td>
<td>.</td>
<td>col1 + col2</td>
<td>col加减乘除</td>
</tr>
<tr>
<td>substr</td>
<td>.</td>
<td>substr(col,0,4)</td>
<td>字符串截取</td>
</tr>
<tr>
<td>AS</td>
<td>.</td>
<td>col * 2 AS col_new</td>
<td>col取别名</td>
</tr>
<tr>
<td>…</td>
<td></td>
<td></td>
<td>还有很多</td>
</tr>
</tbody></table>
<h3 id="统计（select）"><a href="#统计（select）" class="headerlink" title="统计（select）"></a>统计（select）</h3><pre><code>对查找的rows需要按col分组统计的情况
select count(*),avg(col),col from table where col &gt; 1 group by col</code></pre><table>
<thead>
<tr>
<th>Operator</th>
<th>Condition</th>
<th>SQL Example</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>COUNT(*), COUNT(column)</td>
<td>A common function used to counts the number of rows in the group if no column name is specified. Otherwise, count the number of rows in the group with non-NULL values in the specified column.</td>
<td>count(col)</td>
<td>计数</td>
</tr>
<tr>
<td>MIN(column)</td>
<td>Finds the smallest numerical value in the specified column for all rows in the group.</td>
<td>min(col)</td>
<td>最小</td>
</tr>
<tr>
<td>MAX(column)</td>
<td>Finds the largest numerical value in the specified column for all rows in the group.</td>
<td>max(col)</td>
<td>最大</td>
</tr>
<tr>
<td>AVG(column)</td>
<td>Finds the average numerical value in the specified column for all rows in the group.</td>
<td>avg(col)</td>
<td>平均</td>
</tr>
<tr>
<td>SUM(column)</td>
<td>Finds the sum of all numerical values in the specified column for the rows in the group.</td>
<td>sum(col)</td>
<td>求和</td>
</tr>
<tr>
<td>GROUP BY</td>
<td>.</td>
<td>group by col,col2</td>
<td>分组</td>
</tr>
<tr>
<td>HAVING</td>
<td>.</td>
<td>HAVING col&gt;100</td>
<td>分组后条件</td>
</tr>
</tbody></table>
<h3 id="子表-table"><a href="#子表-table" class="headerlink" title="子表 (table)"></a>子表 (table)</h3><pre><code>一次select的结果rows作为下一次select的临时table才能得到最终结果
select * from (select * from table where col &gt; 1) as tmp where col &lt; 1</code></pre><table>
<thead>
<tr>
<th>Operator</th>
<th>Condition</th>
<th>SQL Example</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>（select -）as tmp</td>
<td></td>
<td>（select -）as tmp</td>
<td>select结果做子表</td>
</tr>
<tr>
<td>in（select -）</td>
<td></td>
<td>in（select -）</td>
<td>select结果做条件</td>
</tr>
<tr>
<td>avg（select -）</td>
<td></td>
<td>avg（select -）</td>
<td>select结果做条件</td>
</tr>
</tbody></table>
<h1 id="增"><a href="#增" class="headerlink" title="增"></a>增</h1><h2 id="创建和操纵表"><a href="#创建和操纵表" class="headerlink" title="创建和操纵表"></a>创建和操纵表</h2><h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><h4 id="创建表-1"><a href="#创建表-1" class="headerlink" title="创建表"></a>创建表</h4><p>你可以使用 CREATE TABLE 语句。这个语句定义了表的结构，包括列名、数据类型和约束等信息 </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名 <span class="token punctuation">(</span>
    列名<span class="token number">1</span> 数据类型<span class="token number">1</span> 约束<span class="token punctuation">,</span>
    列名<span class="token number">2</span> 数据类型<span class="token number">2</span> 约束<span class="token punctuation">,</span>
    列名<span class="token number">3</span> 数据类型<span class="token number">3</span> 约束<span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="使用null值"><a href="#使用null值" class="headerlink" title="使用null值"></a>使用null值</h4><blockquote>
<p>理解NULL 不要把NULL值与空串相混淆。NULL值是没有值，它不是空串。如果指定’’（两个单引号，其间没有字符），这在NOT NULL列中是允许的。空串是一个有效的值，它不是无值。NULL值用关键字NULL而不是空串指定</p>
</blockquote>
<h4 id="主键"><a href="#主键" class="headerlink" title="主键"></a>主键</h4><blockquote>
<p>主键和NULL值 第1章介绍过，主键为其值唯一标识表中每个行的列。主键中只能使用不允许NULL值的列。允许NULL值的列不能作为唯一标识。</p>
</blockquote>
<h4 id="AUTO-INCREMENT"><a href="#AUTO-INCREMENT" class="headerlink" title="AUTO_INCREMENT"></a>AUTO_INCREMENT</h4><blockquote>
<p> 一个列属性，用于自动分配唯一的递增值给该列， 常用于为表的主键列分配唯一标识符 </p>
</blockquote>
<p>1.定义 AUTO_INCREMENT：可以在创建表时或者修改表结构时，为某个列指定 AUTO_INCREMENT 属性。一般情况下，这个列通常作为表的主键列。 </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名 <span class="token punctuation">(</span>
    列<span class="token number">1</span> 数据类型 <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>列<span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<ol start="2">
<li><p>获取 AUTO_INCREMENT 值：插入数据后，你可以使用 <code>LAST_INSERT_ID()</code> 函数来获取最后插入的 AUTO_INCREMENT 值。</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 表名 <span class="token punctuation">(</span>列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'value1'</span><span class="token punctuation">,</span> <span class="token string">'value2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> LAST_INSERT_ID<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li><p>自定义起始值和步长：使用 <code>AUTO_INCREMENT = value</code> 语句可以设置 AUTO_INCREMENT 列的起始值，并且可以使用 <code>AUTO_INCREMENT = value, INCREMENT BY value</code> 语句设置步长 </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> INCREMENT <span class="token keyword">BY</span> <span class="token number">5</span><span class="token punctuation">;</span></code></pre>
</li>
</ol>
<h3 id="更新表之alter、drop"><a href="#更新表之alter、drop" class="headerlink" title="更新表之alter、drop"></a>更新表之alter、drop</h3><h4 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h4><pre class=" language-mysql"><code class="language-mysql">ALTER TABLE 旧表名 RENAME TO 新表名;</code></pre>
<h4 id="修改列字段名"><a href="#修改列字段名" class="headerlink" title="修改列字段名"></a>修改列字段名</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 CHANGE 旧列名 新列名 数据类型<span class="token punctuation">;</span></code></pre>
<h4 id="增加列字段"><a href="#增加列字段" class="headerlink" title="增加列字段"></a>增加列字段</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> 列名 数据类型<span class="token punctuation">;</span></code></pre>
<h4 id="删除列字段"><a href="#删除列字段" class="headerlink" title="删除列字段"></a>删除列字段</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> 列名<span class="token punctuation">;</span></code></pre>
<h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">;</span></code></pre>
<h3 id="重命名表"><a href="#重命名表" class="headerlink" title="重命名表"></a>重命名表</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 旧表名 <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> 新表名<span class="token punctuation">;</span></code></pre>
<h2 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h2><h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><p>要在 MySQL 中插入数据，可以使用 INSERT INTO 语句。以下是插入数据的基本语法： </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 表名 <span class="token punctuation">(</span>列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> 列<span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span> 值<span class="token number">2</span><span class="token punctuation">,</span> 值<span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="插入多个行"><a href="#插入多个行" class="headerlink" title="插入多个行"></a>插入多个行</h4><p>  MySQL 中插入多个行数据，可以使用 INSERT INTO 语句，并以 VALUES 子句指定多个值集。每个值集表示一行数据，用括号包围并用逗号分隔。以下是插入多个行数据的基本语法： </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 表名 <span class="token punctuation">(</span>列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> 列<span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span>
    <span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span> 值<span class="token number">2</span><span class="token punctuation">,</span> 值<span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>值<span class="token number">4</span><span class="token punctuation">,</span> 值<span class="token number">5</span><span class="token punctuation">,</span> 值<span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>值<span class="token number">7</span><span class="token punctuation">,</span> 值<span class="token number">8</span><span class="token punctuation">,</span> 值<span class="token number">9</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>使用 INSERT INTO … SELECT 语句：可以通过 SELECT 查询语句获取多行数据，并将其插入到目标表中。例如：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> mytable <span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> column3<span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> column3
<span class="token keyword">FROM</span> othertable
<span class="token keyword">WHERE</span> condition<span class="token punctuation">;</span></code></pre>
<h4 id="提高insert性能"><a href="#提高insert性能" class="headerlink" title="提高insert性能"></a>提高insert性能</h4><p>MySQL用单条INSERT语句处理多个插入比使用多条INSERT 语句快</p>
<p>使用这些方法，可以减少与数据库之间的通信次数，从而提高插入操作的性能。此外，考虑到性能，还可以考虑以下因素：</p>
<ul>
<li>批量提交（Batch Commit）：将多条 INSERT 语句或多个值集合并在一个事务中，然后一次性提交。这样可以减少事务处理的开销，提高插入性能。</li>
<li>索引管理：在大批量插入数据之前，暂时禁用索引、触发器等约束，插入完成后再重新启用。这避免了每次插入都触发索引维护，提高了插入性能。</li>
</ul>
<h1 id="删"><a href="#删" class="headerlink" title="删"></a>删</h1><h2 id="更新和删除数据"><a href="#更新和删除数据" class="headerlink" title="更新和删除数据"></a>更新和删除数据</h2><h3 id="更新数据之update"><a href="#更新数据之update" class="headerlink" title="更新数据之update"></a>更新数据之update</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">UPDATE</span> 表名
<span class="token keyword">SET</span> 列<span class="token number">1</span> <span class="token operator">=</span> 值<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span> <span class="token operator">=</span> 值<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">WHERE</span> 条件<span class="token punctuation">;</span></code></pre>
<h3 id="删除数据之drop、delete、truncate"><a href="#删除数据之drop、delete、truncate" class="headerlink" title="删除数据之drop、delete、truncate"></a>删除数据之drop、delete、truncate</h3><p> 在 MySQL 中，可以使用 DROP 语句来删除数据库、表或索引。请注意，<strong>DROP 操作是不可逆的</strong>，并且会永久删除目标对象及其关联的数据。  执行 DROP 语句之前请务必备份重要的数据，以防止数据丢失。 </p>
<h4 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> 数据库名<span class="token punctuation">;</span></code></pre>
<h4 id="删除表-1"><a href="#删除表-1" class="headerlink" title="删除表"></a>删除表</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">;</span></code></pre>
<h4 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名
<span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> 索引名<span class="token punctuation">;</span></code></pre>
<h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><p>DELETE 语句删除表中的数据。DELETE 语句用于从表中删除满足指定条件的行。以下是 DELETE 命令的基本语法 </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> 条件<span class="token punctuation">;</span></code></pre>
<blockquote>
<p> 需要注意的是，如果不提供 WHERE 子句，则 DELETE 语句将删除表中的所有行。因此，请确保在删除之前仔细检查并设置正确的条件，以防止意外删除数据。 </p>
</blockquote>
<p> 如果只是想清空表中的数据而不是删除表本身，可以使用 TRUNCATE TABLE 命令。TRUNCATE TABLE 语句将删除表中的所有数据，但保留表的结构。 </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">;</span></code></pre>
<h3 id="更新和删除数据的指导原则"><a href="#更新和删除数据的指导原则" class="headerlink" title="更新和删除数据的指导原则"></a>更新和删除数据的指导原则</h3><p>下面是许多SQL程序员使用UPDATE或DELETE时所遵循的习惯。 </p>
<p>1除非确实打算更新和删除每一行，否则绝对不要使用不带WHERE子句的UPDATE或DELETE语句。 </p>
<p>2保证每个表都有主键（如果忘记这个内容，请参阅第15章），尽可能像WHERE子句那样使用它（可以指定各主键、多个值或值的范围）。 </p>
<p>3在对UPDATE或DELETE语句使用WHERE子句前，应该先用SELECT进行测试，保证它过滤的是正确的记录，以防编写的WHERE子句不正确。 </p>
<p>4 使用强制实施引用完整性的数据库，这样MySQL将不允许删除具有与其他表相关联的数据的行。</p>
<h1 id="查"><a href="#查" class="headerlink" title="查"></a>查</h1><h2 id="检索数据之select"><a href="#检索数据之select" class="headerlink" title="检索数据之select"></a>检索数据之select</h2><h3 id="SELECT-命令的基本语法："><a href="#SELECT-命令的基本语法：" class="headerlink" title="SELECT 命令的基本语法："></a>SELECT 命令的基本语法：</h3><p>在 MySQL 中，可以使用 SELECT 语句来检索数据。SELECT 语句用于从表中选择满足指定条件的数据行，并将其返回给用户</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> 条件<span class="token punctuation">;</span></code></pre>
<h3 id="检索不同的行之distinct"><a href="#检索不同的行之distinct" class="headerlink" title="检索不同的行之distinct"></a>检索不同的行之distinct</h3><p> SELECT DISTINCT 用于从表中选择唯一的、不重复的行数据 </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> 条件<span class="token punctuation">;</span></code></pre>
<h3 id="限制结果之limit"><a href="#限制结果之limit" class="headerlink" title="限制结果之limit"></a>限制结果之limit</h3><p> 要限制 SELECT 语句返回的结果行数，可以使用 LIMIT 子句。LIMIT 子句用于从检索到的数据中选择指定数量的行。以下是 LIMIT 子句的基本语法： </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> 条件
<span class="token keyword">LIMIT</span> 数量<span class="token punctuation">;</span></code></pre>
<blockquote>
<p> LIMIT 子句的完整语法是 LIMIT m, n，其中 m 表示起始行的偏移量，n 表示要返回的行数。通过指定起始行和行数，可以实现分页查询或者一次只返回一部分结果；limit m,n:表示从第m+1条开始，取n条数据</p>
<p> LIMIT 子句可以有两个参数，第一个参数表示要返回的起始行的偏移量，第二个参数表示要返回的行数。例如，LIMIT 5, 10 表示从第6行开始返回 10 行数据。 </p>
<p> 起始行的偏移量是从 0 开始计数的，而不是从 1 开始。因此，LIMIT 0, 10 将返回前 10 行数据。 </p>
</blockquote>
<h3 id="使用完全限定的表名"><a href="#使用完全限定的表名" class="headerlink" title="使用完全限定的表名"></a>使用完全限定的表名</h3><p> 使用完全限定的表名，可以在查询中指定表的完整名称，包括数据库名称和表名称。这在多个数据库或模式中存在同名表时非常有用。以下是在查询中使用完全限定表名的示例： </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 数据库名<span class="token punctuation">.</span>模式名<span class="token punctuation">.</span>表名
<span class="token keyword">WHERE</span> 条件
<span class="token keyword">LIMIT</span> m<span class="token punctuation">,</span> n<span class="token punctuation">;</span></code></pre>
<h2 id="排序检索数据之order-by"><a href="#排序检索数据之order-by" class="headerlink" title="排序检索数据之order by"></a>排序检索数据之order by</h2><h3 id="排序数据"><a href="#排序数据" class="headerlink" title="排序数据"></a>排序数据</h3><p> 对数据进行排序，可以使用 SQL 中的 <code>ORDER BY</code> 子句。<code>ORDER BY</code> 子句允许您根据一个或多个列对查询结果进行排序。以下是在 SQL 查询中使用 <code>ORDER BY</code> 子句的基本语法： </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 列名 <span class="token punctuation">[</span><span class="token keyword">ASC</span><span class="token operator">|</span><span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
<h3 id="按多个列排序"><a href="#按多个列排序" class="headerlink" title="按多个列排序"></a>按多个列排序</h3><p>要对多个列进行排序，您可以在 <code>ORDER BY</code> 子句中指定多个列名，并按照优先级从左到右进行排序。例如： </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 列<span class="token number">1</span> <span class="token keyword">ASC</span><span class="token punctuation">,</span> 列<span class="token number">2</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span></code></pre>
<h3 id="指定排序方向"><a href="#指定排序方向" class="headerlink" title="指定排序方向"></a>指定排序方向</h3><p>数据排序不限于升序排序（从A到Z）。这只是默认的排序顺序，还可以使用ORDER BY子句以降序（从Z到A）顺序排序。为了进行降序排序，必须指定DESC关键字。</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 列名 <span class="token keyword">ASC</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 按列名升序排序</span>

<span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 列名 <span class="token keyword">DESC</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 按列名降序排序</span></code></pre>
<blockquote>
<p><strong>区分大小写和排序顺序</strong> 在对文本性的数据进行排序时，A与 a相同吗？a位于B之前还是位于Z之后？这些问题不是理论问题，其答案取决于数据库如何设置。在字典（dictionary）排序顺序中，A被视为与a相同，这是MySQL （和大多数数据库管理系统）的默认行为。但是，许多数据库管理员能够在需要时改变这种行为（如果你的数据库包含大量外语字符，可能必须这样做）。 这里，关键的问题是，如果确实需要改变这种排序顺序，用简单的ORDER BY子句做不到。你必须请求数据库管理员的帮助。</p>
</blockquote>
<h2 id="过滤数据"><a href="#过滤数据" class="headerlink" title="过滤数据"></a>过滤数据</h2><h3 id="过滤数据之where"><a href="#过滤数据之where" class="headerlink" title="过滤数据之where"></a>过滤数据之where</h3><p> 在 SQL 查询中使用 <code>WHERE</code> 子句的基本语法： </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> 条件<span class="token punctuation">;</span></code></pre>
<p> 可以根据需要使用比较运算符（如 <code>=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>&lt;&gt;</code> 等）和逻辑运算符（如 <code>AND</code>, <code>OR</code>, <code>NOT</code>）来构建更复杂的条件。 还有between from  null等</p>
<h3 id="数据过滤"><a href="#数据过滤" class="headerlink" title="数据过滤"></a>数据过滤</h3><h4 id="组合WHERE子句"><a href="#组合WHERE子句" class="headerlink" title="组合WHERE子句"></a>组合WHERE子句</h4><p> 使用逻辑运算符（例如 <code>AND</code>、<code>OR</code> 和 <code>NOT</code>）组合多个条件，以创建更复杂的 <code>WHERE</code> 子句。这些逻辑运算符允许您在查询中同时测试多个条件，并根据需要进行组合。 </p>
<ol>
<li><p>使用 <code>AND</code> 运算符组合条件：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> 条件<span class="token number">1</span> <span class="token operator">AND</span> 条件<span class="token number">2</span><span class="token punctuation">;</span></code></pre>
</li>
<li><p>使用 <code>OR</code> 运算符组合条件 ：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> 条件<span class="token number">1</span> <span class="token operator">OR</span> 条件<span class="token number">2</span><span class="token punctuation">;</span></code></pre>
</li>
<li><p>使用 <code>NOT</code> 运算符否定条件 ：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> 条件<span class="token punctuation">;</span></code></pre>
</li>
<li><p>还可以使用括号 <code>( )</code> 来明确指定运算顺序并进一步组合条件。例如： </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> <span class="token punctuation">(</span>条件<span class="token number">1</span> <span class="token operator">OR</span> 条件<span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">AND</span> 条件<span class="token number">3</span><span class="token punctuation">;</span></code></pre>
</li>
</ol>
<h4 id="IN操作符"><a href="#IN操作符" class="headerlink" title="IN操作符"></a>IN操作符</h4><p><code>IN</code> 操作符用于指定一个条件，以便从多个可能的值中选择匹配的行。<code>IN</code> 操作符用于简化多个 <code>OR</code> 条件的写法。</p>
<p>以下是 <code>IN</code> 操作符的基本语法：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> 列名 <span class="token operator">IN</span> <span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span> 值<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p> 还可以使用子查询作为 <code>IN</code> 操作符的值列表。例如： </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> 列<span class="token number">3</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> 列<span class="token number">1</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> 列
              <span class="token keyword">FROM</span> 表
              <span class="token keyword">WHERE</span> 条件<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="NOT操作符"><a href="#NOT操作符" class="headerlink" title="NOT操作符"></a>NOT操作符</h4><p><code>NOT</code> 操作符用于否定一个条件，即取条件的反义。它允许您排除不满足指定条件的行。</p>
<p>以下是 <code>NOT</code> 操作符的基本语法：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> 条件<span class="token punctuation">;</span></code></pre>
<p> 还可以在 <code>NOT</code> 操作符后面使用其他逻辑运算符（如 <code>AND</code> 和 <code>OR</code>）来进一步组合条件。例如： </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token punctuation">(</span>条件<span class="token number">1</span> <span class="token operator">AND</span> 条件<span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="通配符过滤"><a href="#通配符过滤" class="headerlink" title="通配符过滤"></a>通配符过滤</h3><h4 id="LIKE操作符"><a href="#LIKE操作符" class="headerlink" title="LIKE操作符"></a>LIKE操作符</h4><p><code>LIKE</code> 操作符用于比较字符串列与模式之间的匹配。它通常与通配符一起使用来进行模糊匹配。</p>
<p>以下是 <code>LIKE</code> 操作符的基本语法：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span> 列<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 表名
<span class="token keyword">WHERE</span> 列名 <span class="token operator">LIKE</span> 模式<span class="token punctuation">;</span></code></pre>
<blockquote>
<p><code>LIKE</code> 操作符支持两种通配符：</p>
<ul>
<li><code>%</code>：表示匹配任意字符序列（包括空字符序列）。</li>
<li><code>_</code>：表示匹配任意单个字符。</li>
</ul>
</blockquote>
<h4 id="使用通配符的技巧"><a href="#使用通配符的技巧" class="headerlink" title="使用通配符的技巧"></a>使用通配符的技巧</h4><p>正如所见，MySQL的通配符很有用。但这种功能是有代价的：通配符搜索的处理一般要比前面讨论的其他搜索所花时间更长。这里给出一些使用通配符要记住的技巧。 </p>
<p>1不要过度使用通配符。如果其他操作符能达到相同的目的，应该使用其他操作符。 </p>
<p>2 在确实需要使用通配符时，除非绝对有必要，否则不要把它们用在搜索模式的开始处。把通配符置于搜索模式的开始处，搜索起来是最慢的。 </p>
<p>3仔细注意通配符的位置。如果放错地方，可能不会返回想要的数据。</p>
<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><h4 id="什么是正则表达式"><a href="#什么是正则表达式" class="headerlink" title="什么是正则表达式"></a>什么是正则表达式</h4><p> 正则表达式（Regular Expression），简称为正则或Regex，是一种用于描述字符串模式的工具。它是一种强大而灵活的文本处理工具，常用于文本匹配、搜索和替换。 </p>
<p> 正则表达式的使用广泛，几乎所有编程语言都支持正则表达式的操作。它在文本处理、数据验证、数据清理等领域都有很多应用。 </p>
<p> 以下是一些正则表达式的常见特性和用途： </p>
<blockquote>
<ol>
<li>字符匹配：可以使用普通字符来匹配与之相等的字符。例如，正则表达式 <code>abc</code> 可以匹配字符串中连续的 “abc”。</li>
<li>字符类（Character classes）：可以使用字符类来匹配一组字符中的任意一个。例如，<code>[abc]</code> 可以匹配字符 “a”、”b” 或 “c”。</li>
<li>量词（Quantifiers）：可以使用量词来指定前面的字符或字符类重复出现的次数。例如，<code>a{3}</code> 可以匹配连续的三个 “a”。</li>
<li>转义字符（Escape characters）：可以使用反斜杠 <code>\</code> 来转义特殊字符，使其具有普通字符的含义。例如，<code>\.</code> 可以匹配实际的句点字符 “.”。</li>
<li>边界匹配（Anchors）：可以使用边界匹配符号来指定字符串的开头和结尾。例如，<code>^abc</code> 匹配以 “abc” 开头的字符串。</li>
<li>分组和捕获（Grouping and capturing）：可以使用括号来分组正则表达式，并将分组作为单个单元进行处理和捕获结果。</li>
<li>替换操作：可以使用正则表达式来搜索和替换字符串中与模式匹配的部分。</li>
</ol>
</blockquote>
<p>注意！！！！！！ 正则表达式的语法和特性会因具体的编程语言和工具而有所差异，因此在实际使用时，请参考相关的文档或教程以了解具体的用法和语法规则 </p>
<h4 id="基本字符匹配regexp"><a href="#基本字符匹配regexp" class="headerlink" title="基本字符匹配regexp"></a>基本字符匹配regexp</h4><p> REGEXP 运算符：REGEXP 运算符用于在 WHERE 子句中进行正则表达式匹配。</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> column_name <span class="token operator">REGEXP</span> <span class="token string">'pattern'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 使用正则表达式匹配</span></code></pre>
<p> LOCATE 函数：LOCATE 函数用于查找一个子字符串在目标字符串中的位置。 </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> LOCATE<span class="token punctuation">(</span><span class="token string">'sub_string'</span><span class="token punctuation">,</span> <span class="token string">'string_value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 查找 'sub_string' 在 'string_value' 中的位置</span></code></pre>
<p>LIKE 运算符使用通配符进行模式匹配，而不是正则表达式。它支持通配符 <code>%</code> 和 <code>_</code>。</p>
<ul>
<li><p><code>%</code> 通配符：表示匹配任意字符（包括空字符）的序列，可以出现零次或多次。</p>
</li>
<li><p><code>_</code> 通配符：表示匹配任意单个字符。</p>
</li>
<li><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> column_name <span class="token operator">LIKE</span> <span class="token string">'abc%'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 匹配以 "abc" 开头的字符串</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> column_name <span class="token operator">LIKE</span> <span class="token string">'%xyz'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 匹配以 "xyz" 结尾的字符串</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> column_name <span class="token operator">LIKE</span> <span class="token string">'%def%'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 匹配包含 "def" 的字符串</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> column_name <span class="token operator">LIKE</span> <span class="token string">'a_c'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 匹配第一个字符为 "a"，第三个字符为 "c" 的字符串</span></code></pre>
</li>
</ul>
<p>使用 LIKE 运算符进行模式匹配时，不需要使用特殊的转义字符。</p>
<blockquote>
<p>LIKE与REGEXP 在LIKE和REGEXP之间有一个重要的差别</p>
<p> LIKE 只支持简单的通配符模式匹配，而 REGEXP 支持更复杂的正则表达式模式匹配。 </p>
<p>，LIKE匹配整个列。如果被匹配的文本在列值 中出现，LIKE将不会找到它，相应的行也不被返回（除非使用 通配符）。而REGEXP在列值内进行匹配，如果被匹配的文本在 列值中出现，REGEXP将会找到它，相应的行将被返回。这是一个非常重要的差别</p>
</blockquote>
<h4 id="进行OR匹配"><a href="#进行OR匹配" class="headerlink" title="进行OR匹配"></a>进行OR匹配</h4><p>为搜索两个串之一（或者为这个串，或者为另一个串），使用|，如下所示：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> column_name <span class="token operator">REGEXP</span> <span class="token string">'pattern1|pattern2'</span><span class="token punctuation">;</span></code></pre>
<p>使用|从功能上类似于在SELECT语句中使用OR语句，多个OR条件可并入单个正则表达式。</p>
<blockquote>
<p>两个以上的OR条件 可以给出两个以上的OR条件。例如，’1000 | 2000 | 3000’将匹配1000或2000或3000。</p>
</blockquote>
<h4 id="匹配几个字符之一"><a href="#匹配几个字符之一" class="headerlink" title="匹配几个字符之一"></a>匹配几个字符之一</h4><p>要在正则表达式中匹配几个字符之一，可以使用字符类（Character Class）来实现。字符类用方括号 <code>[]</code> 包围需要匹配的字符，表示匹配其中任意一个字符。</p>
<p>以下是基本的用法示例：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> column_name <span class="token operator">REGEXP</span> <span class="token string">'[abc]'</span><span class="token punctuation">;</span></code></pre>
<p> 还可以通过使用连字符 <code>-</code> 来指定一个字符范围。例如： </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> column_name <span class="token operator">REGEXP</span> <span class="token string">'[0-9]'</span><span class="token punctuation">;</span></code></pre>
<h4 id="匹配范围"><a href="#匹配范围" class="headerlink" title="匹配范围"></a>匹配范围</h4><p> 要匹配一个字符的范围，你可以在正则表达式中使用连字符 <code>-</code> 来表示范围 以下是一些示例：</p>
<ul>
<li><code>[a-z]</code>：匹配任何小写字母。</li>
<li><code>[A-Z]</code>：匹配任何大写字母。</li>
<li><code>[0-9]</code>：匹配任何数字字符。</li>
<li><code>[a-zA-Z]</code>：匹配任何字母（大写或小写）。</li>
<li><code>[a-zA-Z0-9]</code>：匹配任何字母或数字字符。</li>
</ul>
<p>你也可以结合多个范围来创建更复杂的匹配规则。例如，如果你想要匹配一个介于 1 到 5 之间的数字，你可以使用 <code>[1-5]</code>。</p>
<p>以下是一个示例查询，在名为 <code>table_name</code> 的表中查找列 <code>column_name</code> 包含的值是否匹配指定的范围：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> column_name <span class="token operator">REGEXP</span> <span class="token string">'[1-5]'</span><span class="token punctuation">;</span></code></pre>
<h4 id="匹配特殊字符"><a href="#匹配特殊字符" class="headerlink" title="匹配特殊字符"></a>匹配特殊字符</h4><p>要在正则表达式中匹配特殊字符，你需要使用反斜杠 <code>\</code> 进行转义。因为一些字符在正则表达式中有特殊的含义，所以需要用反斜杠来转义它们，以表示字面意义。</p>
<p>以下是一些常见的特殊字符及其转义形式：</p>
<ul>
<li><code>.</code>：匹配除换行符外的任意字符，要匹配实际的点号，可以使用 <code>\.</code>。</li>
<li><code>*</code>：匹配前面的字符零次或多次，要匹配实际的星号，可以使用 <code>\*</code>。</li>
<li><code>+</code>：匹配前面的字符一次或多次，要匹配实际的加号，可以使用 <code>\+</code>。</li>
<li><code>?</code>：匹配前面的字符零次或一次，要匹配实际的问号，可以使用 <code>\?</code>。</li>
<li><code>[</code> 和 <code>]</code>：用于定义字符类，要匹配实际的方括号，可以使用 <code>\[</code> 和 <code>\]</code>。</li>
<li><code>{</code> 和 <code>}</code>：用于指定重复次数，要匹配实际的花括号，可以使用 <code>\{</code> 和 <code>\}</code>。</li>
<li><code>(</code> 和 <code>)</code>：用于分组，要匹配实际的圆括号，可以使用 <code>\(</code> 和 <code>\)</code>。</li>
</ul>
<p>例如，如果你想要匹配一个字符串中的点号和星号，可以使用以下正则表达式：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> column_name <span class="token operator">REGEXP</span> <span class="token string">'[.*]'</span><span class="token punctuation">;</span></code></pre>
<blockquote>
<p> 注意，在不同的上下文中，特殊字符的转义方式可能会有所不同，所以要根据具体情况使用适当的转义形式。 </p>
</blockquote>
<h4 id="匹配字符类"><a href="#匹配字符类" class="headerlink" title="匹配字符类"></a>匹配字符类</h4><p>在正则表达式中，字符类（Character Class）用于匹配一组特定的字符。你可以使用方括号 <code>[]</code> 来定义一个字符类，并在其中列出你想要匹配的字符。</p>
<p>以下是一些字符类的示例：</p>
<ul>
<li><code>[abc]</code>：匹配字符 ‘a’、’b’ 或 ‘c’ 中的任意一个。</li>
<li><code>[aeiou]</code>：匹配任何一个元音字母（’a’、’e’、’i’、’o’、’u’）。</li>
<li><code>[0-9]</code>：匹配任何一个数字字符。</li>
<li><code>[A-Za-z]</code>：匹配任何一个字母（大写或小写）。</li>
</ul>
<p>你还可以在字符类中结合使用连字符 <code>-</code> 来指定一个字符范围。例如，<code>[a-z]</code> 表示匹配任何一个小写字母。</p>
<p>以下是一个示例查询，在名为 <code>table_name</code> 的表中查找列 <code>column_name</code> 包含的值是否匹配指定的字符类：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> column_name <span class="token operator">REGEXP</span> <span class="token string">'[aeiou]'</span><span class="token punctuation">;</span></code></pre>
<h4 id="匹配多个实例"><a href="#匹配多个实例" class="headerlink" title="匹配多个实例"></a>匹配多个实例</h4><p>如果你想要匹配多个实例（即重复出现）的特定模式，你可以使用量词（Quantifier）来指定重复的次数。</p>
<p>以下是一些常用的量词：</p>
<ul>
<li><code>*</code>：匹配前面的模式零次或多次。</li>
<li><code>+</code>：匹配前面的模式一次或多次。</li>
<li><code>?</code>：匹配前面的模式零次或一次。</li>
<li><code>{n}</code>：精确匹配前面的模式出现 n 次。</li>
<li><code>{n,}</code>：匹配前面的模式至少出现 n 次。</li>
<li><code>{n,m}</code>：匹配前面的模式出现 n 到 m 次。</li>
</ul>
<p>例如，如果你想要匹配一个字符串中的连续数字（至少一位数字），可以使用以下正则表达式：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> column_name <span class="token operator">REGEXP</span> <span class="token string">'[0-9]+'</span><span class="token punctuation">;</span></code></pre>
<h4 id="定位符"><a href="#定位符" class="headerlink" title="定位符"></a>定位符</h4><p>在正则表达式中，定位符（Anchors）用于指定模式的位置，而不是字符本身。它们帮助我们匹配字符串的特定位置。</p>
<p>以下是一些常用的定位符：</p>
<ul>
<li><code>^</code>：匹配字符串的开头。例如，<code>^abc</code> 可以匹配以 “abc” 开头的字符串。</li>
<li><code>$</code>：匹配字符串的结尾。例如，<code>xyz$</code> 可以匹配以 “xyz” 结尾的字符串。</li>
<li><code>\b</code>：匹配单词的边界。例如，<code>\bword\b</code> 可以匹配独立的单词 “word”，而不会匹配包含它的单词。</li>
<li><code>\B</code>：匹配非单词的边界。例如，<code>\Bing\B</code> 可以匹配字符串中不是单独单词的 “ing”。</li>
</ul>
<p>以下是一个示例查询，在名为 <code>table_name</code> 的表中查找列 <code>column_name</code> 中以 “abc” 结尾的值：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> column_name <span class="token operator">REGEXP</span> <span class="token string">'abc$'</span><span class="token punctuation">;</span></code></pre>
<h2 id="汇总数据"><a href="#汇总数据" class="headerlink" title="汇总数据"></a>汇总数据</h2><h3 id="聚集函数"><a href="#聚集函数" class="headerlink" title="聚集函数"></a>聚集函数</h3><p>聚集函数（Aggregate Functions）是用于对数据库表中的数据进行聚合计算的函数。它们将多个行的值汇总为单个结果，并返回计算后的结果。</p>
<p>以下是一些常见的聚集函数：</p>
<ul>
<li><code>COUNT()</code>：用于计算指定列中的行数，可以使用 <code>COUNT(*)</code> 计算所有行的数目。</li>
<li><code>SUM()</code>：用于计算指定列中数值类型的总和。</li>
<li><code>AVG()</code>：用于计算指定列中数值类型的平均值。</li>
<li><code>MIN()</code>：用于找到指定列中的最小值。</li>
<li><code>MAX()</code>：用于找到指定列中的最大值。</li>
</ul>
<p>这些聚集函数可以与 SQL 查询语句中的 <code>SELECT</code> 和 <code>GROUP BY</code> 子句一起使用，以便根据特定条件对数据进行聚合计算。</p>
<p>以下是一个示例查询，使用 <code>SUM()</code> 函数计算名为 <code>sales</code> 的表中的销售总额：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">as</span> total_sales <span class="token keyword">FROM</span> sales<span class="token punctuation">;</span></code></pre>
<h3 id="聚集不同值"><a href="#聚集不同值" class="headerlink" title="聚集不同值"></a>聚集不同值</h3><p>想对数据库表中的某一列进行聚集并计算其不同值的数量，你可以使用 <code>COUNT(DISTINCT)</code> 函数。<code>COUNT(DISTINCT)</code> 函数用于计算指定列中不重复值的数量。</p>
<p>以下是一个示例查询，使用 <code>COUNT(DISTINCT)</code> 函数计算名为 <code>products</code> 的表中不同产品的数量：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> product_name<span class="token punctuation">)</span> <span class="token keyword">as</span> distinct_products <span class="token keyword">FROM</span> products<span class="token punctuation">;</span></code></pre>
<h3 id="组合聚集函数"><a href="#组合聚集函数" class="headerlink" title="组合聚集函数"></a>组合聚集函数</h3><p>组合多个聚合函数来按照不同的方式对数据进行计算和汇总。这样可以得到更详细和灵活的结果。</p>
<p>以下是一些示例组合聚合函数的情况：</p>
<ol>
<li><p>计算销售表中不同产品的总销售额和平均销售额：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> product_name<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">as</span> total_sales<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">as</span> average_sales
<span class="token keyword">FROM</span> sales
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> product_name<span class="token punctuation">;</span></code></pre>
<p> 上述查询将根据产品名称分组，计算每个产品的总销售额和平均销售额。 </p>
</li>
<li><p>找到订单表中销售额最高和最低的产品：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">as</span> max_sales<span class="token punctuation">,</span> <span class="token function">MIN</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">as</span> min_sales
<span class="token keyword">FROM</span> orders<span class="token punctuation">;</span></code></pre>
<p> 上述查询将计算订单表中的最高销售额和最低销售额。 </p>
</li>
<li><p>计算某一时间范围内销售表中不同产品的总销售额：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> product_name<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">as</span> total_sales
<span class="token keyword">FROM</span> sales
<span class="token keyword">WHERE</span> sale_date <span class="token operator">BETWEEN</span> <span class="token string">'2023-01-01'</span> <span class="token operator">AND</span> <span class="token string">'2023-12-31'</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> product_name<span class="token punctuation">;</span></code></pre>
<p> 上述查询将根据指定的时间范围内的销售数据，计算每个产品的总销售额。 </p>
</li>
</ol>
<blockquote>
<p><strong>取别名</strong> 在指定别名以包含某个聚集函数的结果时，不应该使 用表中实际的列名。虽然这样做并非不合法，但使用唯一的名字会使你的SQL更易于理解和使用（以及将来容易排除故障）。</p>
</blockquote>
<h2 id="分组数据"><a href="#分组数据" class="headerlink" title="分组数据"></a>分组数据</h2><h3 id="数据分组之group-by"><a href="#数据分组之group-by" class="headerlink" title="数据分组之group by"></a>数据分组之group by</h3><p>数据分组是在 SQL 查询中使用 <code>GROUP BY</code> 子句对数据进行分组的过程。通过数据分组，你可以根据一个或多个列的值将数据划分为不同的组，并对每个组应用聚合函数来计算汇总结果。</p>
<p>以下是一个基本的数据分组示例：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> aggregate_function<span class="token punctuation">(</span>column3<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> <span class="token keyword">table</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">;</span></code></pre>
<h3 id="过滤分组之having"><a href="#过滤分组之having" class="headerlink" title="过滤分组之having"></a>过滤分组之having</h3><blockquote>
<p>HAVING支持所有WHERE操作符</p>
</blockquote>
<p><code>HAVING</code> 子句用于在对数据进行分组后，对分组结果进行过滤。<code>HAVING</code> 子句中的条件是应用于聚合函数的结果。</p>
<p>以下是一些关于 <code>HAVING</code> 子句的使用示例：</p>
<ol>
<li><p>筛选出销售额总和大于 1000 的产品组：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> product_name<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">as</span> total_sales
<span class="token keyword">FROM</span> sales
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> product_name
<span class="token keyword">HAVING</span> total_sales <span class="token operator">></span> <span class="token number">1000</span><span class="token punctuation">;</span></code></pre>
<p> 上述查询根据产品名称对销售数据进行分组，并计算每个组的销售额总和。<code>HAVING</code> 子句筛选出销售额总和大于 1000 的产品组。 </p>
</li>
<li><p>筛选出订单数量超过平均订单数的销售代表组：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> sales_rep<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>order_id<span class="token punctuation">)</span> <span class="token keyword">as</span> orders_count
<span class="token keyword">FROM</span> orders
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> sales_rep
<span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>order_id<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>orders_count<span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>order_id<span class="token punctuation">)</span> <span class="token keyword">as</span> orders_count <span class="token keyword">FROM</span> orders <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> sales_rep<span class="token punctuation">)</span> <span class="token keyword">as</span> subquery<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>上述查询根据销售代表对订单进行分组，并计算每个组的订单数量。<code>HAVING</code> 子句使用子查询来比较订单数量是否超过平均订单数。 </p>
</li>
</ol>
<blockquote>
<p> 请注意，<code>HAVING</code> 子句必须在 <code>GROUP BY</code> 子句之后使用，用于对分组后的结果进行过滤。如果需要对原始数据进行过滤，请使用 <code>WHERE</code> 子句。 </p>
</blockquote>
<h3 id="分组和排序"><a href="#分组和排序" class="headerlink" title="分组和排序"></a>分组和排序</h3><p>​                                                                    ORDER BY与GROUP BY的差别</p>
<table>
<thead>
<tr>
<th>ORDER BY</th>
<th>GROUP BY</th>
</tr>
</thead>
<tbody><tr>
<td>排序产生的输出</td>
<td>分组行。但输出可能不是分组的顺序</td>
</tr>
<tr>
<td>任意列都可以使用（甚至非选择的列也可以使用）</td>
<td>只可能使用选择列或表达式列，而且必须使用每个选择列表达式</td>
</tr>
<tr>
<td>不一定需要</td>
<td>如果与聚集函数一起使用列（或表达式），则必须使用</td>
</tr>
</tbody></table>
<h2 id="复杂查询"><a href="#复杂查询" class="headerlink" title="复杂查询"></a>复杂查询</h2><h3 id="使用子查询"><a href="#使用子查询" class="headerlink" title="使用子查询"></a>使用子查询</h3><h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><p>子查询是指在 SQL 查询中嵌套使用的内部查询。子查询在外部查询的条件、选择列表或其他子句中使用，允许我们从嵌套的查询中检索数据并将其用作外部查询的一部分 </p>
<p> 子查询可以用于以下几个方面： </p>
<ol>
<li><p>在 <code>WHERE</code> 子句中使用子查询进行过滤：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> <span class="token keyword">table</span>
<span class="token keyword">WHERE</span> column1 <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> column1 <span class="token keyword">FROM</span> another_table <span class="token keyword">WHERE</span> condition<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p> 上述查询中，子查询 <code>(SELECT column1 FROM another_table WHERE condition)</code> 用于选择满足特定条件的值，然后外部查询根据这些值对数据进行筛选 </p>
</li>
<li><p>在 <code>SELECT</code> 子句中使用子查询获取计算结果：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> another_table<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_rows
<span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<p> 上述查询中，子查询 <code>(SELECT COUNT(*) FROM another_table)</code> 用于获取 <code>another_table</code> 中的行数，并将其作为别名为 <code>total_rows</code> 的计算结果返回到外部查询中。 </p>
</li>
<li><p>在 <code>FROM</code> 子句中使用子查询作为临时表：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table1 <span class="token keyword">UNION</span> <span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table2<span class="token punctuation">)</span> <span class="token keyword">AS</span> temp_table<span class="token punctuation">;</span></code></pre>
<p> 上述查询中，子查询 <code>(SELECT column1, column2 FROM table1 UNION SELECT column1, column2 FROM table2)</code> 将两个表的数据组合起来，并将其作为临时表 <code>temp_table</code> 在外部查询中使用。 </p>
</li>
</ol>
<h4 id="利用子查询进行过滤"><a href="#利用子查询进行过滤" class="headerlink" title="利用子查询进行过滤"></a>利用子查询进行过滤</h4><p>利用子查询进行过滤是一种常见的使用场景，可以根据内部查询的结果来筛选外部查询的数据。下面是一些示例：</p>
<ol>
<li>使用子查询筛选符合条件的数据：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> <span class="token keyword">table</span>
<span class="token keyword">WHERE</span> column1 <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> column1 <span class="token keyword">FROM</span> another_table <span class="token keyword">WHERE</span> condition<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>上述查询中，子查询 <code>(SELECT column1 FROM another_table WHERE condition)</code> 返回满足特定条件的值，并将这些值用于外部查询中的 <code>WHERE</code> 子句，以筛选表 <code>table</code> 的数据。</p>
<ol start="2">
<li>使用子查询排除符合条件的数据：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> <span class="token keyword">table</span>
<span class="token keyword">WHERE</span> column1 <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> column1 <span class="token keyword">FROM</span> another_table <span class="token keyword">WHERE</span> condition<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>上述查询中，子查询 <code>(SELECT column1 FROM another_table WHERE condition)</code> 返回满足特定条件的值，并将这些值用于外部查询中的 <code>WHERE</code> 子句的 <code>NOT IN</code> 条件，以排除表 <code>table</code> 中包含这些值的数据。</p>
<ol start="3">
<li>使用子查询进行范围过滤：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> <span class="token keyword">table</span>
<span class="token keyword">WHERE</span> column1 <span class="token operator">></span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>column1<span class="token punctuation">)</span> <span class="token keyword">FROM</span> another_table<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>上述查询中，子查询 <code>(SELECT AVG(column1) FROM another_table)</code> 返回列 <code>column1</code> 的平均值，并将其用于外部查询中的 <code>WHERE</code> 子句，以筛选出表 <code>table</code> 中大于平均值的数据。</p>
<h4 id="使用子查询作为计算字段"><a href="#使用子查询作为计算字段" class="headerlink" title="使用子查询作为计算字段"></a>使用子查询作为计算字段</h4><p>使用子查询作为计算字段是一种常见的用法，可以在查询结果中包含根据子查询计算得到的额外信息。下面是一个示例：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> another_table<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_rows
<span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<p>上述查询中，子查询 <code>(SELECT COUNT(*) FROM another_table)</code> 用于获取表 <code>another_table</code> 中的行数，并将其作为计算字段 <code>total_rows</code> 包含在查询结果中。这样，查询结果就会返回每一行数据的 <code>column1</code>、<code>column2</code> 字段值，以及额外的计算字段 <code>total_rows</code>。</p>
<blockquote>
<p>子查询作为计算字段必须只返回单个值。如果子查询返回了多个值，将会引发错误。</p>
</blockquote>
<h3 id="组合查询"><a href="#组合查询" class="headerlink" title="组合查询"></a>组合查询</h3><h4 id="组合查询-1"><a href="#组合查询-1" class="headerlink" title="组合查询"></a>组合查询</h4><p>多数SQL查询都只包含从一个或多个表中返回数据的单条SELECT语句。MySQL也允许执行多个查询（多条SELECT语句），并将结果作为单个查询结果集返回。这些组合查询通常称为并（union）或复合查询（compound query）。</p>
<h4 id="创建组合查询union"><a href="#创建组合查询union" class="headerlink" title="创建组合查询union"></a>创建组合查询union</h4><p>要创建组合查询，可以使用 UNION、INTERSECT 或 EXCEPT 运算符来合并多个查询的结果集。下面是一个示例：</p>
<ol>
<li>使用 UNION 运算符合并查询结果：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table1
<span class="token keyword">UNION</span>
<span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table2<span class="token punctuation">;</span></code></pre>
<p>上述查询将从表 <code>table1</code> 和 <code>table2</code> 中选择 <code>column1</code> 和 <code>column2</code> 字段的结果，并将两个结果集合并在一起。如果有重复的行，将只返回一次。</p>
<ol start="2">
<li>使用 INTERSECT 运算符获取查询结果的交集：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table1
<span class="token keyword">INTERSECT</span>
<span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table2<span class="token punctuation">;</span></code></pre>
<p>上述查询将返回同时在表 <code>table1</code> 和 <code>table2</code> 中存在的行，且只包含 <code>column1</code> 和 <code>column2</code> 字段。</p>
<ol start="3">
<li>使用 EXCEPT 运算符排除一个查询结果中存在的行：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table1
<span class="token keyword">EXCEPT</span>
<span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table2<span class="token punctuation">;</span></code></pre>
<p>上述查询将从表 <code>table1</code> 中选择 <code>column1</code> 和 <code>column2</code> 字段的结果，排除在表 <code>table2</code> 中存在的行。</p>
<blockquote>
<p>注意，在使用这些运算符时，两个结果集的列数和列的数据类型必须相同。</p>
</blockquote>
<h4 id="UNION规则"><a href="#UNION规则" class="headerlink" title="UNION规则"></a>UNION规则</h4><p>当使用 UNION 运算符合并多个查询结果时，需要遵循以下规则：</p>
<ol>
<li><p>结果集的列数必须相同：所有查询语句中选择的列数必须一致。如果列数不匹配，则会导致错误。</p>
</li>
<li><p>列的数据类型必须兼容：相应位置上的列数据类型必须是兼容的，否则会导致错误。例如，数字列和字符串列不能直接相加，因此它们的数据类型不兼容。</p>
</li>
<li><p>结果集的列顺序必须一致：每个 SELECT 语句中选择的列的顺序必须相同，否则将导致结果集中的列顺序混乱。</p>
</li>
<li><p>去除重复行：UNION 运算符默认会去除结果集中的重复行。如果想保留重复行，可以使用 UNION ALL 运算符。</p>
</li>
</ol>
<p>示例：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table1
<span class="token keyword">UNION</span>
<span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table2<span class="token punctuation">;</span></code></pre>
<p>上述查询将从表 <code>table1</code> 和 <code>table2</code> 中选择 <code>column1</code> 和 <code>column2</code> 字段的结果，合并为一个结果集，并去除重复行。</p>
<p>总之，使用 UNION 运算符时，要确保查询语句的列数、列的数据类型和列顺序都一致，以及根据需要决定是否去除重复行。</p>
<h4 id="包含或取消重复的行"><a href="#包含或取消重复的行" class="headerlink" title="包含或取消重复的行"></a>包含或取消重复的行</h4><p>要在组合查询中包含或取消重复的行，可以使用 UNION ALL 运算符或 DISTINCT 关键字。</p>
<ol>
<li>使用 UNION ALL 运算符：这个运算符会将所有查询的结果集合并在一起，并保留所有的行，包括重复的行。</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table1
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span>
<span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table2<span class="token punctuation">;</span></code></pre>
<p>上述查询将从表 <code>table1</code> 和 <code>table2</code> 中选择 <code>column1</code> 和 <code>column2</code> 字段的结果，合并为一个结果集，并保留重复的行。</p>
<ol start="2">
<li>使用 DISTINCT 关键字：这个关键字用于消除结果集中的重复行。</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<p>上述查询将从表 <code>table</code> 中选择 <code>column1</code> 和 <code>column2</code> 字段的结果，并且只返回不重复的行。</p>
<blockquote>
<p>UNION ALL 可以更快地执行，因为它不涉及去重的操作。而使用 DISTINCT 会对结果进行去重处理，可能会导致一些性能开销。</p>
</blockquote>
<h4 id="对组合结果进行排序"><a href="#对组合结果进行排序" class="headerlink" title="对组合结果进行排序"></a>对组合结果进行排序</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table1
<span class="token keyword">UNION</span>
<span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table2
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> column1 <span class="token keyword">ASC</span><span class="token operator">/</span><span class="token keyword">DESC</span><span class="token punctuation">;</span></code></pre>
<h2 id="计算字段"><a href="#计算字段" class="headerlink" title="计算字段"></a>计算字段</h2><h3 id="创建字段"><a href="#创建字段" class="headerlink" title="创建字段"></a>创建字段</h3><h4 id="计算字段-1"><a href="#计算字段-1" class="headerlink" title="计算字段"></a>计算字段</h4><p>计算字段是在 SELECT 语句中使用表达式或函数来计算出的一个新字段。它不是数据库表中的实际列，而是在查询结果中动态生成的。以下是几个常见的计算字段示例：</p>
<ol>
<li>使用表达式计算字段：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> column3<span class="token punctuation">,</span> <span class="token punctuation">(</span>column1 <span class="token operator">+</span> column2<span class="token punctuation">)</span> <span class="token keyword">AS</span> sum <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<p>上述查询中，<code>(column1 + column2)</code> 表达式计算出了一个名为 <code>sum</code> 的计算字段，表示 <code>column1</code> 和 <code>column2</code> 列的和。</p>
<ol start="2">
<li>使用函数计算字段：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> column3<span class="token punctuation">,</span> UPPER<span class="token punctuation">(</span>column1<span class="token punctuation">)</span> <span class="token keyword">AS</span> uppercase <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<p>上述查询中，<code>UPPER(column1)</code> 函数将 <code>column1</code> 列的值转换为大写，并创建了一个名为 <code>uppercase</code> 的计算字段。</p>
<ol start="3">
<li>使用条件判断计算字段：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> column3<span class="token punctuation">,</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> column1 <span class="token operator">></span> column2 <span class="token keyword">THEN</span> <span class="token string">'Greater'</span> <span class="token keyword">ELSE</span> <span class="token string">'Less or equal'</span> <span class="token keyword">END</span> <span class="token keyword">AS</span> comparison <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<p>上述查询中，使用 CASE 表达式根据条件判断创建了一个名为 <code>comparison</code> 的计算字段，如果 <code>column1</code> 大于 <code>column2</code>，则为 ‘Greater’，否则为 ‘Less or equal’。</p>
<blockquote>
<p>使用计算字段时，你可以给该字段起一个别名（AS 别名），以便在结果中显示更友好的列名。</p>
</blockquote>
<h4 id="拼接字段"><a href="#拼接字段" class="headerlink" title="拼接字段"></a>拼接字段</h4><p>在查询中，可以使用 CONCAT 函数来拼接字段。 CONCAT 函数可以将多个字段或字符串连接在一起形成一个新的字符串。</p>
<p>以下是几个示例：</p>
<ol>
<li>拼接两个字段：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> CONCAT<span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">)</span> <span class="token keyword">AS</span> concatenated <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<p>上述查询中，<code>CONCAT(column1, column2)</code> 将 <code>column1</code> 和 <code>column2</code> 的值拼接在一起，并创建一个名为 <code>concatenated</code> 的计算字段。</p>
<ol start="2">
<li>拼接字段和字符串：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> CONCAT<span class="token punctuation">(</span>column1<span class="token punctuation">,</span> <span class="token string">' is the value of column1'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> result <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<p>上述查询中，<code>CONCAT(column1, &#39; is the value of column1&#39;)</code> 将 <code>column1</code> 的值和一个字符串拼接在一起，并创建一个名为 <code>result</code> 的计算字段。</p>
<ol start="3">
<li>拼接多个字段和字符串：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> CONCAT<span class="token punctuation">(</span>column1<span class="token punctuation">,</span> <span class="token string">' - '</span><span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token string">' - '</span><span class="token punctuation">,</span> column3<span class="token punctuation">)</span> <span class="token keyword">AS</span> combined <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<p>上述查询中，<code>CONCAT(column1, &#39; - &#39;, column2, &#39; - &#39;, column3)</code> 将 <code>column1</code>、<code>column2</code> 和 <code>column3</code> 的值以及一些字符串连接在一起，并创建一个名为 <code>combined</code> 的计算字段。</p>
<h4 id="执行算术计算"><a href="#执行算术计算" class="headerlink" title="执行算术计算"></a>执行算术计算</h4><p>在 SQL 查询中，可以使用内置的数学函数来执行算术计算。下面是几个常用的数学函数示例：</p>
<ol>
<li>加法：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">(</span>column1 <span class="token operator">+</span> column2<span class="token punctuation">)</span> <span class="token keyword">AS</span> sum <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<p>上述查询中，<code>(column1 + column2)</code> 执行了列 <code>column1</code> 和 <code>column2</code> 的加法操作，并创建了一个名为 <code>sum</code> 的计算字段。</p>
<ol start="2">
<li>减法：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">(</span>column1 <span class="token operator">-</span> column2<span class="token punctuation">)</span> <span class="token keyword">AS</span> difference <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<p>上述查询中，<code>(column1 - column2)</code> 执行了列 <code>column1</code> 减去 <code>column2</code> 的操作，并创建了一个名为 <code>difference</code> 的计算字段。</p>
<ol start="3">
<li>乘法：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">(</span>column1 <span class="token operator">*</span> column2<span class="token punctuation">)</span> <span class="token keyword">AS</span> product <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<p>上述查询中，<code>(column1 * column2)</code> 执行了列 <code>column1</code> 和 <code>column2</code> 的乘法操作，并创建了一个名为 <code>product</code> 的计算字段。</p>
<ol start="4">
<li>除法：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">(</span>column1 <span class="token operator">/</span> column2<span class="token punctuation">)</span> <span class="token keyword">AS</span> quotient <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<p>上述查询中，<code>(column1 / column2)</code> 执行了列 <code>column1</code> 除以 <code>column2</code> 的操作，并创建了一个名为 <code>quotient</code> 的计算字段。</p>
<h3 id="使用数据处理函数"><a href="#使用数据处理函数" class="headerlink" title="使用数据处理函数"></a>使用数据处理函数</h3><h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><p>与其他大多数计算机语言一样，SQL支持利用函数来处理数据。函数一般是在数据上执行的，它给数据的转换和处理提供了方便。</p>
<h4 id="使用函数"><a href="#使用函数" class="headerlink" title="使用函数"></a>使用函数</h4><p>在 SQL 查询中，可以使用各种数据处理函数来处理数据。以下是几个常用的数据处理函数示例：</p>
<ol>
<li>字符串处理函数：</li>
</ol>
<ul>
<li>UPPER：将字符串转换为大写。</li>
<li>LOWER：将字符串转换为小写。</li>
<li>LENGTH：返回字符串的长度。</li>
<li>SUBSTRING：提取字符串的子串。</li>
</ul>
<p>例如：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> UPPER<span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> uppercase<span class="token punctuation">,</span> LOWER<span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> lowercase<span class="token punctuation">,</span> LENGTH<span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> length<span class="token punctuation">,</span> SUBSTRING<span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> substring <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<ol start="2">
<li>数值处理函数：</li>
</ol>
<ul>
<li>ROUND：将数值四舍五入到指定精度。</li>
<li>CEILING：将数值向上取整。</li>
<li>FLOOR：将数值向下取整。</li>
<li>ABS：返回数值的绝对值。</li>
</ul>
<p>例如：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> rounded<span class="token punctuation">,</span> CEILING<span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> ceiling<span class="token punctuation">,</span> FLOOR<span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> floor<span class="token punctuation">,</span> ABS<span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> absolute <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<ol start="3">
<li>日期和时间处理函数：</li>
</ol>
<ul>
<li>DATEPART：提取日期或时间部分（年、月、日、小时、分钟等）的值。</li>
<li>DATEADD：根据指定的日期或时间间隔添加或减去值。</li>
<li>DATEDIFF：计算两个日期之间的差异。</li>
</ul>
<p>例如：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> DATEPART<span class="token punctuation">(</span>year<span class="token punctuation">,</span> date_column<span class="token punctuation">)</span> <span class="token keyword">AS</span> year_part<span class="token punctuation">,</span> DATEADD<span class="token punctuation">(</span>month<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> date_column<span class="token punctuation">)</span> <span class="token keyword">AS</span> added_month<span class="token punctuation">,</span> DATEDIFF<span class="token punctuation">(</span>day<span class="token punctuation">,</span> date_column1<span class="token punctuation">,</span> date_column2<span class="token punctuation">)</span> <span class="token keyword">AS</span> day_difference <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span></code></pre>
<h2 id="表联结"><a href="#表联结" class="headerlink" title="表联结"></a>表联结</h2><h3 id="联结"><a href="#联结" class="headerlink" title="联结"></a>联结</h3><p>SQL最强大的功能之一就是能在数据检索查询的执行中联结（join）表。联结是利用SQL的SELECT能执行的最重要的操作，很好地理解联结及其语法是学习SQL的一个极为重要的组成部分。</p>
<h4 id="关系表"><a href="#关系表" class="headerlink" title="关系表"></a>关系表</h4><p> 关系表（Relational Table）是关系型数据库中的基本组成部分之一，它由行和列组成，用于存储和组织数据。关系表是以二维表格形式呈现的，其中每一列表示一个属性（字段），每一行表示一个记录（元组）。 </p>
<p>关系表的设计通常遵循数据库设计的规范，包括主键（用于唯一标识每条记录）、外键（用于与其他表建立关联）等约束。 </p>
<h4 id="为什么要使用联结"><a href="#为什么要使用联结" class="headerlink" title="为什么要使用联结"></a>为什么要使用联结</h4><p>分解数据为多个表能更有效地存储，更方便地处理，且具有更大的可伸缩性。但这些好处是有代价的；</p>
<p>在关系型数据库中，使用联结（Join）是一种重要的操作，用于将多个关系表中的数据按照特定的关联条件进行合并。下面是一些使用联结的原因：</p>
<ol>
<li>数据关联：当数据分布在多个表中，并且这些表之间存在关联关系时，使用联结可以根据关联条件将相关数据连接在一起，从而获得更完整和详细的信息。</li>
<li>数据查询：通过联结，可以执行更复杂和灵活的查询操作。联结允许同时查询和获取多个关联表中的数据，从而得到更准确和全面的查询结果。</li>
<li>数据完整性：联结可以确保数据的完整性和一致性。通过将关联表的数据合并在一起，可以避免数据冗余和不一致问题，提高数据库的数据质量。</li>
<li>数据分析：联结可以帮助进行复杂的数据分析任务。通过将多个表中的数据合并，可以进行更深入和综合的数据分析，发现更多的关联和模式。</li>
<li>优化性能：在某些情况下，通过联结来优化查询性能。通过联结，可以减少需要多次查询的数据访问次数，从而提高查询效率。</li>
</ol>
<blockquote>
<p> 联结操作需要谨慎使用，尤其是对于包含大量数据的表或复杂的联结操作。合理设计数据库的关系、索引和查询语句是确保联结操作高效和准确的关键。 </p>
</blockquote>
<h3 id="创建联结"><a href="#创建联结" class="headerlink" title="创建联结"></a>创建联结</h3><p>在关系型数据库中，可以使用 SQL 语句来创建联结（JOIN），将多个表中的数据按照特定的关联条件进行合并。常见的联结类型包括内联结（INNER JOIN）、左联结（LEFT JOIN）、右联结（RIGHT JOIN）和全联结（FULL JOIN）。</p>
<p>以下是基本的联结语法示例：</p>
<ol>
<li>内联结（INNER JOIN）：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> table1
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> table2 <span class="token keyword">ON</span> table1<span class="token punctuation">.</span><span class="token keyword">column</span> <span class="token operator">=</span> table2<span class="token punctuation">.</span><span class="token keyword">column</span><span class="token punctuation">;</span></code></pre>
<ol start="2">
<li>左联结（LEFT JOIN）：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> table1
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> table2 <span class="token keyword">ON</span> table1<span class="token punctuation">.</span><span class="token keyword">column</span> <span class="token operator">=</span> table2<span class="token punctuation">.</span><span class="token keyword">column</span><span class="token punctuation">;</span></code></pre>
<ol start="3">
<li>右联结（RIGHT JOIN）：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> table1
<span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> table2 <span class="token keyword">ON</span> table1<span class="token punctuation">.</span><span class="token keyword">column</span> <span class="token operator">=</span> table2<span class="token punctuation">.</span><span class="token keyword">column</span><span class="token punctuation">;</span></code></pre>
<ol start="4">
<li>全联结（FULL JOIN）：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> table1
<span class="token keyword">FULL</span> <span class="token keyword">JOIN</span> table2 <span class="token keyword">ON</span> table1<span class="token punctuation">.</span><span class="token keyword">column</span> <span class="token operator">=</span> table2<span class="token punctuation">.</span><span class="token keyword">column</span><span class="token punctuation">;</span></code></pre>
<p>在上述示例中，table1 和 table2 是要进行联结的两个表，ON 子句指定了关联条件，用于指定两个表之间要匹配的列。SELECT 子句中列出了想要查询的字段。</p>
<h3 id="创建高级联结"><a href="#创建高级联结" class="headerlink" title="创建高级联结"></a>创建高级联结</h3><h4 id="使用表别名"><a href="#使用表别名" class="headerlink" title="使用表别名"></a>使用表别名</h4><p>当需要进行更复杂的联结操作时，可以结合表别名使用高级联结。</p>
<p>别名除了用于列名和计算字段外，SQL还允许给表名起别名。这样做有两个主要理由： </p>
<p>1缩短SQL语句； </p>
<p>2允许在单条SELECT语句中多次使用相同的表。</p>
<p>以下是一个示例，演示如何使用表别名进行内联结和左联结：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> t1<span class="token punctuation">.</span>column1<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>column2
<span class="token keyword">FROM</span> table1 <span class="token keyword">AS</span> t1
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> table2 <span class="token keyword">AS</span> t2 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>id <span class="token operator">=</span> t2<span class="token punctuation">.</span>id
<span class="token keyword">WHERE</span> t1<span class="token punctuation">.</span>column3 <span class="token operator">=</span> <span class="token string">'value'</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> t1<span class="token punctuation">.</span>column1<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>column2
<span class="token keyword">FROM</span> table1 <span class="token keyword">AS</span> t1
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> table2 <span class="token keyword">AS</span> t2 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>id <span class="token operator">=</span> t2<span class="token punctuation">.</span>id
<span class="token keyword">WHERE</span> t1<span class="token punctuation">.</span>column3 <span class="token operator">=</span> <span class="token string">'value'</span><span class="token punctuation">;</span></code></pre>
<p>在上述示例中，我们使用表别名 “t1” 和 “t2” 分别代替了表 table1 和 table2。通过表别名，我们可以在查询中引用相应的表，并指定它们之间的关联条件。</p>
<p>第一个示例展示了一个内联结，使用 INNER JOIN 关键字将表 t1 和 t2 进行联结，并在 ON 子句中指定了关联条件。这个查询只返回满足 t1.column3 = ‘value’ 条件的结果。</p>
<p>第二个示例展示了一个左联结，使用 LEFT JOIN 关键字将表 t1 和 t2 进行联结，并在 ON 子句中指定了关联条件。这个查询同样只返回满足 t1.column3 = ‘value’ 条件的结果，但保留了 t1 表中没有匹配的记录。</p>
<h4 id="使用不同类型的联结"><a href="#使用不同类型的联结" class="headerlink" title="使用不同类型的联结"></a>使用不同类型的联结</h4><p>当处理一张表内的数据关联时，可以使用自联结（self-join），而当需要联结两个具有相同结构的表时，可以使用自然联结（natural join）。此外，当需要获取包括不符合联结条件的行时，可以使用外部联结（outer join）。</p>
<p>下面是使用不同类型的联结的示例：</p>
<ol>
<li>自联结（Self-Join）：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> t1<span class="token punctuation">.</span>column1<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>column2
<span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">AS</span> t1
<span class="token keyword">JOIN</span> <span class="token keyword">table</span> <span class="token keyword">AS</span> t2 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>id <span class="token operator">=</span> t2<span class="token punctuation">.</span>related_id<span class="token punctuation">;</span></code></pre>
<p>在自联结中，我们使用相同的表别名 “t1” 和 “t2” 来引用同一张表，并指定它们之间的关联条件。这可以用于将表中的某一行与同一表中的其他行进行比较和关联。</p>
<ol start="2">
<li>自然联结（Natural Join）：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> table1
<span class="token keyword">NATURAL</span> <span class="token keyword">JOIN</span> table2<span class="token punctuation">;</span></code></pre>
<p>自然联结会自动根据两个表中列名相同的列进行关联。该操作省略了使用 ON 子句指定关联条件的步骤。</p>
<ol start="3">
<li>外部联结（Outer Join）：</li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> t1<span class="token punctuation">.</span>column1<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>column2
<span class="token keyword">FROM</span> table1 <span class="token keyword">AS</span> t1
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> table2 <span class="token keyword">AS</span> t2 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>id <span class="token operator">=</span> t2<span class="token punctuation">.</span>id<span class="token punctuation">;</span></code></pre>
<p>外部联结可以分为左外部联结（LEFT OUTER JOIN）和右外部联结（RIGHT OUTER JOIN）。上述示例演示了左外部联结，返回左表（table1）中的所有行，以及与右表（table2）中符合关联条件的匹配行。如果没有匹配行，则右表中的列将用 NULL 值表示。</p>
<h4 id="使用带聚集函数的联结"><a href="#使用带聚集函数的联结" class="headerlink" title="使用带聚集函数的联结"></a>使用带聚集函数的联结</h4><p>可以在联结操作中使用聚合函数来对联结后的数据进行聚合计算。以下是使用带有聚合函数的联结的示例：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> t1<span class="token punctuation">.</span><span class="token keyword">column</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>t2<span class="token punctuation">.</span><span class="token keyword">column</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span> table1 <span class="token keyword">AS</span> t1
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> table2 <span class="token keyword">AS</span> t2 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>id <span class="token operator">=</span> t2<span class="token punctuation">.</span>id
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> t1<span class="token punctuation">.</span><span class="token keyword">column</span><span class="token punctuation">;</span></code></pre>
<p>上述示例中，使用了内联结（INNER JOIN）将表1（table1）和表2（table2）进行联结，并使用关联条件 t1.id = t2.id 进行匹配。然后，通过聚合函数 COUNT(t2.column) 对联结后的数据进行计数。使用 GROUP BY 子句按照 t1.column 进行分组，以便为每个不同的 t1.column 值计算对应的 COUNT(t2.column) 值。</p>
<p>可以根据需要使用其他聚集函数，例如 SUM、AVG、MIN、MAX 等等来对联结后的数据进行聚合计算。</p>
<h4 id="使用联结和联结条件"><a href="#使用联结和联结条件" class="headerlink" title="使用联结和联结条件"></a>使用联结和联结条件</h4><p>1注意所使用的联结类型。一般我们使用内部联结，但使用外部联结也是有效的。 </p>
<p>2保证使用正确的联结条件，否则将返回不正确的数据。 </p>
<p>3应该总是提供联结条件，否则会得出笛卡儿积。 </p>
<p>4在一个联结中可以包含多个表，甚至对于每个联结可以采用不同 的联结类型。虽然这样做是合法的，一般也很有用，但应该在一起测试它们前，分别测试每个联结。这将使故障排除更为简单。</p>
<h2 id="使用视图"><a href="#使用视图" class="headerlink" title="使用视图"></a>使用视图</h2><h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><p>视图是虚拟的表。与包含数据的表不一样，视图只包含使用时动态检索数据的查询</p>
<h3 id="为什么使用视图"><a href="#为什么使用视图" class="headerlink" title="为什么使用视图"></a>为什么使用视图</h3><p>使用视图有以下几个常见的优点和用途：</p>
<ol>
<li>简化复杂的查询：视图可以将多个表关联和筛选操作封装在一个视图中，从而简化复杂查询的编写过程。用户只需使用视图进行查询，而不必关心底层表的结构和关系。</li>
<li>数据安全性和权限控制：通过视图，可以限制用户对底层表的直接访问，从而提高数据的安全性。你可以定义一个仅包含所需的列和行的视图，然后将该视图授予特定的用户或角色。这样，用户只能通过视图访问被授权的数据，而无法直接访问表。</li>
<li>数据抽象和逻辑分离：视图可以提供数据的抽象层，将数据库的物理结构与逻辑操作进行分离。这有助于简化应用程序开发过程，使得应用程序可以基于视图进行操作，而不必直接处理底层表的复杂性。</li>
<li>维护和变更管理：如果数据库的底层表结构发生变化，例如添加或删除列，但视图的定义保持不变，那么应用程序也不需要进行大量的更改。视图提供了一种独立于底层数据结构的方式来访问数据，从而减少了维护工作和代码的重构。</li>
<li>提供数据重用：通过创建视图，可以将常用的查询逻辑封装起来并重复使用。这样可以提高代码的可维护性和代码重用性，减少冗余代码的编写。</li>
</ol>
<h3 id="视图的规则和限制"><a href="#视图的规则和限制" class="headerlink" title="视图的规则和限制"></a>视图的规则和限制</h3><p>视图在使用时有一些规则和限制，下面是常见的一些规则和限制：</p>
<ol>
<li><p>视图必须基于一个或多个已存在的表或其他视图。视图无法直接基于其他视图。</p>
</li>
<li><p>视图只能查询数据，不能修改数据。这意味着你不能通过视图进行插入、更新或删除操作。如果想要修改数据，需要直接操作底层的表。</p>
</li>
<li><p>视图的列名可以是自定义的，不一定与底层表的列名相同。但是在查询时，仍然需要使用视图中定义的列名。</p>
</li>
<li><p>视图的定义可以包含筛选条件，用于限制结果集中的行。这可以通过在创建视图时使用 WHERE 子句来实现。</p>
</li>
<li><p>视图的定义可以包含连接操作，用于关联多个表。这可以通过在创建视图时使用 JOIN 子句来实现。</p>
</li>
<li><p>视图可以嵌套，即一个视图可以基于另一个视图进行定义。但是要注意，嵌套的视图可能会影响查询性能，因此需要谨慎使用。</p>
</li>
<li><p>视图可以具有授权和权限限制。只有具有足够权限的用户才能够查询和使用视图。</p>
</li>
<li><p>视图的性能可能会受到影响。复杂的视图查询可能会导致性能下降，特别是当涉及到大量数据和多个表时。在设计视图时应考虑性能方面的问题。</p>
</li>
</ol>
<h3 id="使用视图-1"><a href="#使用视图-1" class="headerlink" title="使用视图"></a>使用视图</h3><p>视图用CREATE VIEW语句来创建</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> view_name <span class="token keyword">AS</span>
<span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> condition<span class="token punctuation">;</span></code></pre>
<p>使用SHOW CREATE VIEW viewname；来查看创建视图的语句</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> view_name<span class="token punctuation">;</span></code></pre>
<p>用DROP删除视图，其语法为DROP VIEW viewname</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> view_name<span class="token punctuation">;</span></code></pre>
<p>更新视图时，可以先用DROP再用CREATE，也可以直接用CREATE OR  REPLACE VIEW。如果要更新的视图不存在，则第2条更新语句会创建一个视图；如果要更新的视图存在，则第2条更新语句会替换原有视图。</p>
<h4 id="利用视图简化复杂的联结"><a href="#利用视图简化复杂的联结" class="headerlink" title="利用视图简化复杂的联结"></a>利用视图简化复杂的联结</h4><p>使用视图可以简化复杂的联结操作。通过创建视图，将多个表的联结逻辑封装起来，并且在需要时直接使用视图进行查询，而无需编写繁琐的联结语句。</p>
<p>以下是一个示例，展示如何使用视图简化联结操作：</p>
<p>假设你有两个表：<code>orders</code> 和 <code>customers</code>，它们之间通过 <code>customer_id</code> 列进行关联。你想要查询订单信息以及对应的顾客信息。首先，你可以创建一个名为 <code>order_details</code> 的视图，该视图包含订单信息和对应的顾客信息。创建视图的语句如下：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> order_details <span class="token keyword">AS</span>
<span class="token keyword">SELECT</span> o<span class="token punctuation">.</span>order_id<span class="token punctuation">,</span> o<span class="token punctuation">.</span>order_date<span class="token punctuation">,</span> <span class="token number">c</span><span class="token punctuation">.</span>customer_name
<span class="token keyword">FROM</span> orders o
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> customers <span class="token number">c</span> <span class="token keyword">ON</span> o<span class="token punctuation">.</span>customer_id <span class="token operator">=</span> <span class="token number">c</span><span class="token punctuation">.</span>customer_id<span class="token punctuation">;</span></code></pre>
<p>在上述语句中，我们通过联结 <code>orders</code> 表和 <code>customers</code> 表来获取订单信息和对应的顾客信息，并将结果保存为 <code>order_details</code> 视图。</p>
<p>一旦视图创建完成，你可以直接使用该视图进行查询，而无需编写联结语句。例如，你可以执行以下查询命令来获取订单信息以及对应的顾客信息：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> order_details<span class="token punctuation">;</span></code></pre>
<p>这样，你就可以轻松地获取到订单信息和对应的顾客信息，而无需手动编写联结语句。</p>
<p>通过使用视图，你可以将复杂的联结操作封装为一个可重复使用的对象，并提高查询的简洁性和可读性。</p>
<h4 id="用视图重新格式化检索出的数据"><a href="#用视图重新格式化检索出的数据" class="headerlink" title="用视图重新格式化检索出的数据"></a>用视图重新格式化检索出的数据</h4><p>使用视图可以重新格式化检索出的数据。在创建视图时，通过查询语句对数据进行适当的格式化操作，以满足需求。</p>
<p>以下是一个示例，展示如何使用视图重新格式化检索出的数据：</p>
<p>假设你有一个名为 <code>employees</code> 的表，其中包含员工的姓名和薪资信息。你想要将这些数据按照一定的格式进行检索，例如将姓名的首字母大写，并显示薪资的千位分隔符。</p>
<p>首先，你可以创建一个名为 <code>formatted_employees</code> 的视图，该视图重新格式化了员工表中的数据。创建视图的语句如下：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> formatted_employees <span class="token keyword">AS</span>
<span class="token keyword">SELECT</span> 
  CONCAT<span class="token punctuation">(</span><span class="token function">UCASE</span><span class="token punctuation">(</span><span class="token keyword">LEFT</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> LOWER<span class="token punctuation">(</span>SUBSTRING<span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> formatted_name<span class="token punctuation">,</span>
  <span class="token function">FORMAT</span><span class="token punctuation">(</span>salary<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> formatted_salary
<span class="token keyword">FROM</span> employees<span class="token punctuation">;</span></code></pre>
<p>在上述语句中，我们使用了字符串函数 <code>CONCAT</code> 和 <code>UCASE</code> 来将姓名的首字母大写，并使用了字符串函数 <code>LOWER</code> 和 <code>SUBSTRING</code> 来保持其余部分小写。我们还使用了函数 <code>FORMAT</code> 来添加薪资的千位分隔符。</p>
<p>一旦视图创建完成，你可以直接使用该视图进行查询，以获取已经重新格式化的数据。例如，你可以执行以下查询命令来获取重新格式化后的员工数据：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> formatted_employees<span class="token punctuation">;</span></code></pre>
<p>这样，你就可以获得按照特定格式重新处理过的员工数据。通过使用视图，你可以在数据库中创建一个虚拟表，该表包含经过格式化的数据，以便于查询和使用。</p>
<h4 id="用视图过滤不想要的数据"><a href="#用视图过滤不想要的数据" class="headerlink" title="用视图过滤不想要的数据"></a>用视图过滤不想要的数据</h4><p>使用视图可以方便地过滤掉你不想要的数据，只返回符合指定条件的数据。你可以在创建视图时，通过添加筛选条件来过滤数据。</p>
<p>以下是一个示例，展示如何使用视图过滤不想要的数据：</p>
<p>假设你有一个名为 <code>products</code> 的表，其中包含产品的名称、价格和库存信息。你想要创建一个视图，只包含价格高于100的产品信息。</p>
<p>你可以使用以下语句创建一个名为 <code>high_priced_products</code> 的视图：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> high_priced_products <span class="token keyword">AS</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> products
<span class="token keyword">WHERE</span> price <span class="token operator">></span> <span class="token number">100</span><span class="token punctuation">;</span></code></pre>
<p>在上述语句中，我们在查询语句中包含了一个筛选条件 <code>WHERE price &gt; 100</code>，它将仅返回价格高于100的产品信息。</p>
<p>创建完成后，你可以直接使用该视图进行查询，以获取满足条件的产品信息。例如，你可以执行以下查询命令来获取价格高于100的产品：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> high_priced_products<span class="token punctuation">;</span></code></pre>
<p>这样，你就可以获得符合条件的产品信息，而不包括价格低于或等于100的产品。通过使用视图进行数据过滤，你可以创建一个过滤后的虚拟表，使得查询结果更加精确和符合特定需求。</p>
<h4 id="使用视图与计算字段"><a href="#使用视图与计算字段" class="headerlink" title="使用视图与计算字段"></a>使用视图与计算字段</h4><p>使用视图和计算字段可以在数据库中创建一个虚拟表，其中包含经过计算的字段。视图可以简化复杂的计算操作，并使其更易于查询和使用。</p>
<p>以下是一个示例，展示如何在视图中使用计算字段：</p>
<p>假设你有一个名为 <code>sales</code> 的表，其中包含销售订单的信息，包括产品名称、单价和销售数量。你想要创建一个视图，包含订单的总价和利润率。</p>
<p>你可以使用以下语句创建一个名为 <code>sales_summary</code> 的视图：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> sales_summary <span class="token keyword">AS</span>
<span class="token keyword">SELECT</span> 
  product_name<span class="token punctuation">,</span>
  unit_price<span class="token punctuation">,</span>
  quantity<span class="token punctuation">,</span>
  unit_price <span class="token operator">*</span> quantity <span class="token keyword">AS</span> total_price<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>unit_price <span class="token operator">*</span> quantity <span class="token operator">-</span> cost_price <span class="token operator">*</span> quantity<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>unit_price <span class="token operator">*</span> quantity<span class="token punctuation">)</span> <span class="token keyword">AS</span> profit_margin
<span class="token keyword">FROM</span> sales<span class="token punctuation">;</span></code></pre>
<p>在上述语句中，我们在查询语句中定义了两个计算字段：<code>total_price</code> 和 <code>profit_margin</code>。<code>total_price</code> 计算了订单的总价，通过将单价与销售数量相乘；<code>profit_margin</code> 计算了订单的利润率，通过使用销售利润与总价的比率来计算。</p>
<p>创建完成后，你可以直接使用该视图进行查询，以获取包含计算字段的信息。例如，你可以执行以下查询命令来获取销售订单的摘要信息：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> sales_summary<span class="token punctuation">;</span></code></pre>
<p>这样，你就可以获得包含了订单总价和利润率的摘要信息。</p>
<p>通过使用视图和计算字段，你可以在数据库中创建一个方便查询的虚拟表，其中包含经过计算的字段，使得数据分析和报表生成更加便捷。</p>
<h4 id="更新视图"><a href="#更新视图" class="headerlink" title="更新视图"></a>更新视图</h4><p>视图的数据能否更新？答案视情况而定</p>
<p>通常，视图是可更新的（即，可以对它们使用INSERT、UPDATE和DELETE）。更新一个视图将更新其基表（可以回忆一下，视图本身没有数据）。如果你对视图增加或删除行，实际上是对其基表增加或删除行</p>
<p>并非所有视图都是可更新的。基本上可以说，如果MySQL不能正确地确定被更新的基数据，则不允许更新（包括插入和删除）。这实际上意味着，如果视图定义中有以下操作，则不能进行视图的更新：</p>
<p> 分组（使用GROUP BY和HAVING）； </p>
<p> 联结； </p>
<p> 子查询； </p>
<p> 并； </p>
<p> 聚集函数（Min()、Count()、Sum()等）</p>
<p> DISTINCT； </p>
<p> 导出（计算）列</p>
<blockquote>
<p>将视图用于检索 一般，应该将视图用于检索（SELECT语句） </p>
<p>而不用于更新（INSERT、UPDATE和DELETE）</p>
</blockquote>
<h1 id="其他功能"><a href="#其他功能" class="headerlink" title="其他功能"></a>其他功能</h1><h2 id="使用存储过程"><a href="#使用存储过程" class="headerlink" title="使用存储过程"></a>使用存储过程</h2><h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3><p>存储过程是一组预定义的SQL语句集合，它们被存储在数据库中，并可以作为一个单元来执行。存储过程具有以下优点：</p>
<ol>
<li><p>代码封装：存储过程将一组相关的SQL语句封装在一个单元中，使得代码更易于维护和管理。</p>
</li>
<li><p>提高性能：存储过程在数据库中预编译，因此执行速度较快。此外，存储过程还可以减少与数据库服务器的通信次数，提高整体性能。</p>
</li>
<li><p>安全性：通过存储过程，可以限制用户直接访问表，而只允许通过存储过程来执行特定的操作。这样可以增强数据库的安全性。</p>
</li>
<li><p>代码重用：存储过程可以在不同的应用程序中重用，从而减少了代码的编写量，提高了开发效率。</p>
</li>
</ol>
<p>下面是一个简单的存储过程示例，展示如何创建和执行存储过程：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> GetProductCount<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
    <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> total_products <span class="token keyword">FROM</span> products<span class="token punctuation">;</span>
<span class="token keyword">END</span><span class="token punctuation">;</span></code></pre>
<p>上述存储过程名为 <code>GetProductCount</code>，它使用<code>SELECT COUNT(*)</code>语句来获取表 <code>products</code> 的总行数，并将结果存储在一个名为 <code>total_products</code> 的列中。</p>
<p>要执行该存储过程，可以使用以下语句：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CALL</span> GetProductCount<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>执行存储过程后，将返回一个结果集，其中包含产品总数。</p>
<h3 id="为什么要使用存储过程"><a href="#为什么要使用存储过程" class="headerlink" title="为什么要使用存储过程"></a>为什么要使用存储过程</h3><p>使用存储过程有多种好处和用途，以下是一些常见的原因和情景：</p>
<ol>
<li><p>提高性能：存储过程在数据库中预编译，并且可以进行优化。这意味着存储过程的执行速度通常比简单的SQL查询更快。此外，存储过程可以减少与数据库服务器的通信次数，从而提高整体性能。</p>
</li>
<li><p>代码重用：存储过程可以在不同的应用程序中重复使用。通过将常用的业务逻辑封装在存储过程中，可以避免在每个应用程序中重复编写相同的代码，从而提高开发效率和代码的可维护性。</p>
</li>
<li><p>安全性控制：存储过程可以用于限制用户对数据库的直接访问，并只允许他们通过存储过程执行特定的操作。这样可以增强数据库的安全性，同时更好地控制数据的访问和修改权限。</p>
</li>
<li><p>简化复杂的业务逻辑：存储过程可以容纳包含多个SQL语句和逻辑的复杂业务操作。通过将这些操作封装在一个存储过程中，可以简化应用程序中的代码，并使其更易于理解和维护。</p>
</li>
<li><p>数据一致性和完整性：存储过程可以确保特定的业务规则和约束得到遵守。通过在存储过程中定义相应的数据验证、更新和插入规则，可以确保数据的一致性和完整性。</p>
</li>
<li><p>数据库层面的错误处理：存储过程允许在数据库层面上进行错误处理和异常处理。可以使用条件语句和异常处理机制来捕获和处理数据库操作中的错误，从而提供更加可靠和稳定的应用程序。</p>
</li>
</ol>
<h3 id="使用存储过程-1"><a href="#使用存储过程-1" class="headerlink" title="使用存储过程"></a>使用存储过程</h3><ol>
<li><h4 id="执行存储过程："><a href="#执行存储过程：" class="headerlink" title="执行存储过程："></a>执行存储过程：</h4></li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CALL</span> 存储过程名称<span class="token punctuation">;</span></code></pre>
<p>通过使用 <code>CALL</code> 关键字，可以执行指定名称的存储过程。</p>
<ol start="2">
<li><h4 id="创建存储过程："><a href="#创建存储过程：" class="headerlink" title="创建存储过程："></a>创建存储过程：</h4></li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> 存储过程名称<span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
    存储过程体
<span class="token keyword">END</span><span class="token punctuation">;</span></code></pre>
<p>使用 <code>CREATE PROCEDURE</code> 关键字和合适的语法，可以创建一个新的存储过程。参数列表和存储过程体都是可选的，根据需要进行定义。</p>
<ol start="3">
<li><h4 id="删除存储过程："><a href="#删除存储过程：" class="headerlink" title="删除存储过程："></a>删除存储过程：</h4></li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">PROCEDURE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> 存储过程名称<span class="token punctuation">;</span></code></pre>
<p>使用 <code>DROP PROCEDURE</code> 关键字可以删除指定名称的存储过程。<code>IF EXISTS</code> 部分用于检查存储过程是否存在，避免出现错误。</p>
<ol start="4">
<li><h4 id="使用参数："><a href="#使用参数：" class="headerlink" title="使用参数："></a>使用参数：</h4><p>存储过程可以接收输入参数、输出参数或输入输出参数，用于动态地处理数据。在创建存储过程时，可以在参数列表中定义这些参数，并在存储过程体中使用它们。</p>
<p>以下是一个示例，展示如何在存储过程中使用参数：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> ProcessData<span class="token punctuation">(</span><span class="token operator">IN</span> input_param <span class="token keyword">INT</span><span class="token punctuation">,</span> <span class="token keyword">OUT</span> output_param <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
    <span class="token comment" spellcheck="true">-- 在存储过程中使用输入参数</span>
    <span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 
    <span class="token keyword">FROM</span> <span class="token keyword">table</span>
    <span class="token keyword">WHERE</span> condition <span class="token operator">=</span> input_param<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">-- 在存储过程中使用输出参数</span>
    <span class="token keyword">SET</span> output_param <span class="token operator">=</span> input_param <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">END</span><span class="token punctuation">;</span></code></pre>
<p>上述示例中的存储过程 <code>ProcessData</code> 接收一个输入参数 <code>input_param</code> 和一个输出参数 <code>output_param</code>。具体的实现逻辑包括：</p>
<ul>
<li>使用 <code>IN</code> 关键字声明输入参数 <code>input_param</code> 的类型。</li>
<li>在存储过程体中，可以使用输入参数 <code>input_param</code> 来进行条件查询，根据不同的条件动态处理数据。</li>
<li>使用 <code>OUT</code> 关键字声明输出参数 <code>output_param</code> 的类型。</li>
<li>在存储过程体中，可以对输出参数 <code>output_param</code> 进行赋值操作，以便将结果传递给调用者。</li>
</ul>
</li>
</ol>
<ol start="5">
<li><h4 id="建立智能存储过程："><a href="#建立智能存储过程：" class="headerlink" title="建立智能存储过程："></a>建立智能存储过程：</h4><p>智能存储过程是指具有逻辑判断和条件处理能力的存储过程。您可以在存储过程的主体中添加条件、循环和控制语句来实现更复杂的业务逻辑。</p>
<p>下面是一个示例，展示如何在存储过程中使用条件语句和控制流程语句：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> IntelligentProcedure<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
    <span class="token keyword">DECLARE</span> total_sales <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">DECLARE</span> bonus <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">-- 计算总销售额</span>
    <span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>sales_amount<span class="token punctuation">)</span> <span class="token keyword">INTO</span> total_sales <span class="token keyword">FROM</span> sales<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">-- 根据销售额计算奖金</span>
    <span class="token keyword">IF</span> total_sales <span class="token operator">></span> <span class="token number">100000</span> <span class="token keyword">THEN</span>
        <span class="token keyword">SET</span> bonus <span class="token operator">=</span> total_sales <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
    ELSEIF total_sales <span class="token operator">></span> <span class="token number">50000</span> <span class="token keyword">THEN</span>
        <span class="token keyword">SET</span> bonus <span class="token operator">=</span> total_sales <span class="token operator">*</span> <span class="token number">0.05</span><span class="token punctuation">;</span>
    <span class="token keyword">ELSE</span>
        <span class="token keyword">SET</span> bonus <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">-- 输出结果</span>
    <span class="token keyword">SELECT</span> bonus <span class="token keyword">AS</span> <span class="token string">'Bonus Amount'</span><span class="token punctuation">;</span>
<span class="token keyword">END</span><span class="token punctuation">;</span></code></pre>
<p>上述示例中的存储过程 <code>IntelligentProcedure</code> 实现了一个简单的逻辑：根据总销售额的不同范围，计算出相应的奖金金额。具体的实现逻辑包括：</p>
<ul>
<li>定义两个变量 <code>total_sales</code> 和 <code>bonus</code> 来保存总销售额和奖金金额。</li>
<li>使用 <code>SELECT...INTO</code> 语句将总销售额查询结果赋值给 <code>total_sales</code> 变量。</li>
<li>使用条件语句 <code>IF...ELSEIF...ELSE</code> 根据不同的销售额范围计算奖金金额，并将结果赋值给 <code>bonus</code> 变量。</li>
<li>最后，使用 <code>SELECT</code> 语句输出奖金金额。</li>
</ul>
<p>通过这种方式，您可以根据实际需求，在存储过程中添加适当的条件、循环和控制流程语句，以实现更智能的业务逻辑。</p>
</li>
<li><h4 id="检查存储过程："><a href="#检查存储过程：" class="headerlink" title="检查存储过程："></a>检查存储过程：</h4></li>
</ol>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> 存储过程名称<span class="token punctuation">;</span></code></pre>
<p>使用 <code>SHOW CREATE PROCEDURE</code> 命令可以查看指定存储过程的创建语句。这对于检查存储过程的定义和结构非常有用。</p>
<h2 id="使-用-游-标"><a href="#使-用-游-标" class="headerlink" title="使 用 游 标"></a>使 用 游 标</h2><p>游标（Cursor）是一种用于在存储过程或函数中遍历结果集的机制。通过使用游标，您可以逐行处理查询结果，并对每一行执行特定的操作。</p>
<p>以下是一个示例，展示如何在存储过程中使用游标：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> ProcessData<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
    <span class="token keyword">DECLARE</span> done <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">FALSE</span><span class="token punctuation">;</span>
    <span class="token keyword">DECLARE</span> column1 <span class="token keyword">INT</span><span class="token punctuation">;</span>
    <span class="token keyword">DECLARE</span> column2 <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">-- 声明游标</span>
    <span class="token keyword">DECLARE</span> cur <span class="token keyword">CURSOR</span> <span class="token keyword">FOR</span> <span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">-- 定义异常处理程序</span>
    <span class="token keyword">DECLARE</span> <span class="token keyword">CONTINUE</span> <span class="token keyword">HANDLER</span> <span class="token keyword">FOR</span> <span class="token operator">NOT</span> FOUND <span class="token keyword">SET</span> done <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">-- 打开游标</span>
    <span class="token keyword">OPEN</span> cur<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">-- 循环遍历结果集</span>
    read_loop: LOOP
        <span class="token comment" spellcheck="true">-- 读取下一行数据</span>
        <span class="token keyword">FETCH</span> cur <span class="token keyword">INTO</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">;</span>
        <span class="token keyword">IF</span> done <span class="token keyword">THEN</span>
            LEAVE read_loop<span class="token punctuation">;</span>
        <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">-- 在此处对每一行数据执行特定操作</span>
        <span class="token comment" spellcheck="true">-- 示例：输出列值</span>
        <span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">;</span>

    <span class="token keyword">END</span> LOOP<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">-- 关闭游标</span>
    <span class="token keyword">CLOSE</span> cur<span class="token punctuation">;</span>
<span class="token keyword">END</span><span class="token punctuation">;</span></code></pre>
<p>上述示例中的存储过程 <code>ProcessData</code> 使用游标来遍历查询结果集并对每一行数据执行特定的操作。具体的实现逻辑包括：</p>
<ul>
<li>声明变量 <code>done</code> 来表示游标是否已经遍历完所有行。</li>
<li>声明与查询结果集对应的变量，例如 <code>column1</code> 和 <code>column2</code>。</li>
<li>声明游标 <code>cur</code> 并将查询结果集赋值给游标。</li>
<li>定义异常处理程序，用于在遍历结果集时捕获异常（例如结果集为空）。</li>
<li>打开游标以准备遍历结果集。</li>
<li>使用循环语句 <code>LOOP</code> 和条件判断 <code>IF done THEN LEAVE read_loop; END IF;</code> 来循环遍历结果集，并在每次迭代中读取下一行数据。</li>
<li>在循环体中，您可以对每一行数据执行特定的操作，例如输出列值。</li>
<li>最后，关闭游标以释放资源。</li>
</ul>
<h2 id="使用触发器"><a href="#使用触发器" class="headerlink" title="使用触发器"></a>使用触发器</h2><p>触发器（Trigger）是数据库对象，可以在指定的数据库操作（例如插入、更新、删除）发生时自动执行一段代码。通过使用触发器，您可以在特定的数据变动事件上执行自定义逻辑，实现数据的约束、验证、派生等操作。</p>
<p>以下是一个示例，展示如何创建触发器：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> trigger_name
BEFORE <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> table_name
<span class="token keyword">FOR EACH ROW</span>
<span class="token keyword">BEGIN</span>
    <span class="token comment" spellcheck="true">-- 在此处编写触发器的逻辑</span>
    <span class="token comment" spellcheck="true">-- 示例：自动生成创建时间</span>
    <span class="token keyword">SET</span> NEW<span class="token punctuation">.</span>create_time <span class="token operator">=</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">END</span><span class="token punctuation">;</span></code></pre>
<p>上述示例中，我们创建了一个名为 <code>trigger_name</code> 的触发器，并指定它在表 <code>table_name</code> 上的插入操作之前执行。关键的配置包括：</p>
<ul>
<li>使用 <code>CREATE TRIGGER</code> 语句创建触发器，并为触发器指定一个名称。</li>
<li>使用 <code>BEFORE INSERT ON table_name</code> 指定触发器在表 <code>table_name</code> 上的插入操作之前执行。您可以根据需要选择不同的触发时机，如 <code>AFTER INSERT</code>、<code>BEFORE UPDATE</code>、<code>AFTER DELETE</code> 等。</li>
<li>使用 <code>FOR EACH ROW</code> 指定触发器对每一行数据都执行。</li>
<li>在 <code>BEGIN</code> 和 <code>END</code> 之间编写触发器的逻辑。在示例中，我们将新插入的行的 <code>create_time</code> 列设置为当前时间。</li>
</ul>
<h2 id="管理事务处理"><a href="#管理事务处理" class="headerlink" title="管理事务处理"></a>管理事务处理</h2><p>在数据库中，事务（Transaction）是一组数据库操作的逻辑单元，要么全部成功执行，要么全部回滚（撤销）。事务处理可以确保数据库在并发操作时维持数据的一致性和完整性。</p>
<p>以下是管理事务处理的示例：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 启动事务</span>
<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">-- 在此处执行数据库操作</span>
<span class="token comment" spellcheck="true">-- 示例：插入数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name <span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">-- 示例：更新数据</span>
<span class="token keyword">UPDATE</span> table_name <span class="token keyword">SET</span> column1 <span class="token operator">=</span> new_value <span class="token keyword">WHERE</span> condition<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">-- 示例：删除数据</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> condition<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">-- 提交事务</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">-- 或者回滚事务</span>
<span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span></code></pre>
<p>上述示例中，我们使用 <code>START TRANSACTION</code> 开始一个事务，并在 <code>COMMIT</code> 处提交事务。如果需要回滚事务则可以使用 <code>ROLLBACK</code>。</p>
<p>在事务内，我们可以执行各种数据库操作，如插入、更新和删除等。这些操作将被视为一个逻辑单元，要么全部成功提交，要么全部回滚。</p>
<p>在实际应用中，为了确保事务的正确性和一致性，还应考虑以下几点：</p>
<ul>
<li>使用异常处理（例如使用存储过程或触发器）来捕获错误并决定是否回滚事务。</li>
<li>设置适当的隔离级别，以控制并发访问时数据的可见性和一致性。</li>
<li>避免长时间持有事务，以减少数据库锁的冲突和资源占用。</li>
</ul>
<h2 id="全球化和本地化"><a href="#全球化和本地化" class="headerlink" title="全球化和本地化"></a>全球化和本地化</h2><p>全球化（Globalization）和本地化（Localization）是软件开发领域中与跨国界应用程序的适配性和可用性相关的两个概念。字符集和校对顺序在全球化和本地化中起着重要的作用。</p>
<ol>
<li><p>字符集（Character Set）：</p>
<ul>
<li>字符集定义了一个字符到数字代码的映射规则。不同的字符集支持不同的字符范围，如 ASCII、Unicode 和 UTF-8。</li>
<li>全球化应用程序应该使用支持广泛的字符集，如UTF-8，以确保能够正确处理各种语言的字符和文本。</li>
</ul>
</li>
<li><p>校对顺序（Collation Order）：</p>
<ul>
<li>校对顺序定义了字符排序的规则和算法。它决定了在排序和比较字符串时字符的顺序和优先级。</li>
<li>不同的语言和地区使用不同的校对顺序来满足其特定的语言和文化需求。例如，英文通常使用字典排序，而中文通常使用拼音排序。</li>
<li>在本地化过程中，校对顺序需要根据特定的语言和地区进行配置，以确保正确的排序和比较。</li>
</ul>
</li>
</ol>
<p>在使用字符集和校对顺序时，需要注意以下几点：</p>
<ol>
<li><p>数据库配置：</p>
<ul>
<li>在数据库中，选择适当的字符集和校对顺序进行配置。不同的数据库管理系统（如MySQL、Oracle等）提供了相关配置选项。</li>
<li>确保数据库中使用的字符集和校对顺序与应用程序需要处理的语言和文本一致。</li>
</ul>
</li>
<li><p>应用程序开发：</p>
<ul>
<li>在应用程序开发中，使用与目标受众语言和文化相匹配的字符集和校对顺序进行编码和处理文本。</li>
<li>避免硬编码字符集和校对顺序，而是使用配置文件或在运行时动态设置。</li>
</ul>
</li>
<li><p>测试和验证：</p>
<ul>
<li>在全球化和本地化过程中，进行充分的测试和验证以确保字符集和校对顺序的正确性。</li>
<li>包括输入输出测试、排序和比较测试，以及特定语言和文化下的正确性验证。</li>
</ul>
</li>
</ol>
<h2 id="安-全-管-理"><a href="#安-全-管-理" class="headerlink" title="安 全 管 理"></a>安 全 管 理</h2><h3 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h3><ol>
<li>访问控制：<ul>
<li>MySQL使用权限模型来控制用户对数据库的访问。可以使用GRANT语句为用户分配权限。</li>
<li>GRANT语句用于授予用户特定的权限（如SELECT、INSERT、UPDATE、DELETE等）和访问级别（全局、数据库、表或列级别）。</li>
<li>使用REVOKE语句可以撤销已经授权的权限。</li>
</ul>
</li>
</ol>
<h3 id="管理用户"><a href="#管理用户" class="headerlink" title="管理用户"></a>管理用户</h3><ol>
<li><p>管理用户：</p>
<ul>
<li><p>创建用户：可以使用CREATE USER语句创建新用户。示例：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'username'</span>@'localhost<span class="token string">' IDENTIFIED BY '</span>password'<span class="token punctuation">;</span></code></pre>
<p>可以指定用户名、主机名以及密码。</p>
</li>
<li><p>删除用户：使用DROP USER语句删除指定的用户。示例：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token string">'username'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span></code></pre>
</li>
</ul>
</li>
</ol>
<ul>
<li><p>设置访问权限：使用GRANT语句为用户分配特定权限。示例：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> <span class="token keyword">database</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'username'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span></code></pre>
</li>
</ul>
<ul>
<li><p>更改口令：使用ALTER USER语句或SET PASSWORD语句更改用户的口令。示例：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'username'</span>@'localhost<span class="token string">' IDENTIFIED BY '</span>new_password'<span class="token punctuation">;</span></code></pre>
</li>
</ul>
<h2 id="数据库维护"><a href="#数据库维护" class="headerlink" title="数据库维护"></a>数据库维护</h2><p>数据库维护是确保数据库系统正常运行和保障数据安全性的重要工作。下面是一些常见的数据库维护任务及相应的方法：</p>
<h3 id="备份数据："><a href="#备份数据：" class="headerlink" title="备份数据："></a>备份数据：</h3><ul>
<li><p>MySQL提供多种备份方法，包括物理备份和逻辑备份。常用的备份工具有<code>mysqldump</code>和<code>mysqlpump</code>。</p>
</li>
<li><p>使用<code>mysqldump</code>命令可以导出整个数据库或指定表的内容。例如，</p>
<pre class=" language-sql"><code class="language-sql">mysqldump <span class="token operator">-</span>u <span class="token operator">&lt;</span>username<span class="token operator">></span> <span class="token operator">-</span>p <span class="token operator">&lt;</span>databasename<span class="token operator">></span> <span class="token operator">></span> <span class="token keyword">backup</span><span class="token punctuation">.</span>sql</code></pre>
<p>将整个数据库导出到backup.sql文件中。</p>
</li>
<li><p><code>mysqlpump</code>是MySQL 5.7及更新版本提供的备份工具，具有更高的性能和更多的选项。使用方法与<code>mysqldump</code>类似。</p>
</li>
</ul>
<h3 id="进行数据库维护："><a href="#进行数据库维护：" class="headerlink" title="进行数据库维护："></a>进行数据库维护：</h3><ul>
<li>定期优化数据库以提高性能，可以使用<code>OPTIMIZE TABLE</code>命令来优化表。</li>
<li>清理不必要的或过期的数据，可以使用<code>DELETE</code>语句或<code>TRUNCATE TABLE</code>命令。</li>
<li>检查并修复损坏的表，可以使用<code>CHECK TABLE</code>和<code>REPAIR TABLE</code>命令。</li>
</ul>
<h3 id="诊断启动问题："><a href="#诊断启动问题：" class="headerlink" title="诊断启动问题："></a>诊断启动问题：</h3><ul>
<li>如果数据库无法启动，首先可以检查错误日志文件，位于MySQL数据目录下的<code>error.log</code>文件，了解具体的错误信息。</li>
<li>可以使用<code>systemctl</code>命令（适用于使用systemd的系统）或<code>service</code>命令（适用于其他系统）来启动、停止、重启和查看MySQL服务的状态。例如，<code>systemctl start mysql</code>启动MySQL服务。</li>
</ul>
<h3 id="查看日志文件："><a href="#查看日志文件：" class="headerlink" title="查看日志文件："></a>查看日志文件：</h3><ul>
<li>MySQL记录了各种事件和错误信息，这些信息可以在错误日志文件中找到。错误日志的路径和文件名在MySQL配置文件中进行配置。</li>
<li>可以使用文本编辑器打开错误日志文件进行查看，或者使用<code>tail</code>命令实时查看最新的日志内容。例如，<code>tail -f /var/log/mysql/error.log</code>。</li>
</ul>
<h2 id="改-善-性-能"><a href="#改-善-性-能" class="headerlink" title="改 善 性 能"></a>改 善 性 能</h2><ol>
<li><p>优化查询：</p>
<ul>
<li>确保正确使用索引：合理设计表结构和索引，避免全表扫描。可以使用<code>EXPLAIN</code>语句来分析查询的执行计划，以确定是否有效使用了索引。</li>
<li>编写高效的查询语句：避免不必要的连接和子查询，优化复杂的SQL语句，提高查询的效率。</li>
<li>使用适当的数据类型：避免使用过大或不合适的数据类型，减少存储空间和I/O操作。</li>
</ul>
</li>
<li><p>调整配置：</p>
<ul>
<li>配置合适的缓冲区大小：如<code>innodb_buffer_pool_size</code>和<code>key_buffer_size</code>等，根据系统资源和负载情况进行调整，提高内存利用率。</li>
<li>优化连接池设置：增加或减少<code>max_connections</code>参数，根据实际需求合理配置连接数。</li>
<li>调整日志设置：合理配置日志的级别和写入方式，避免过多的日志写入对性能造成影响。</li>
</ul>
</li>
<li><p>硬件升级：</p>
<ul>
<li>提升硬件性能：增加CPU核心数、内存容量和磁盘I/O速度，以提高系统的处理能力和响应速度。</li>
<li>使用SSD存储：将磁盘替换为SSD可以显著提升I/O性能，加快读写速度。</li>
</ul>
</li>
<li><p>实施缓存策略：</p>
<ul>
<li>使用查询缓存：启用适当的查询缓存（如果可用），可减少数据库重复查询的开销。</li>
<li>使用应用层缓存：如Redis或Memcached等，将热门数据缓存在内存中，减少对数据库的访问。</li>
</ul>
</li>
<li><p>定期维护和监控：</p>
<ul>
<li>定期进行数据库优化和碎片整理：使用<code>OPTIMIZE TABLE</code>命令优化表，清理无效数据和索引碎片。</li>
<li>监控数据库性能：使用MySQL自带的性能监控工具或第三方监控工具，及时发现瓶颈并采取相应措施。</li>
</ul>
</li>
</ol>
<h1 id="MYSQL附录"><a href="#MYSQL附录" class="headerlink" title="MYSQL附录"></a>MYSQL附录</h1><h2 id="MYSQL必知必会导图"><a href="#MYSQL必知必会导图" class="headerlink" title="MYSQL必知必会导图"></a>MYSQL必知必会导图</h2><img src="https://cdn.jsdelivr.net/gh/Bevis23/blog-pic/mysql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A.jpg" alt="mysql必知必会" style="zoom: 25%;">

<h2 id="查看帮助文档"><a href="#查看帮助文档" class="headerlink" title="查看帮助文档"></a>查看帮助文档</h2><ul>
<li>在MySQL命令行客户端中，可以通过输入<code>help</code>或<code>\h</code>命令获取基本查询语法的帮助信息。</li>
<li>若要了解特定命令或函数的详细信息，可以使用<code>help</code>命令后面接上相应的命令或函数，例如：<code>help SELECT</code>。</li>
<li>还可以使用<code>man</code>命令（仅限于UNIX/Linux系统），如<code>man mysql</code>或<code>man mysqldump</code>来查看相关的手册页。</li>
</ul>
<h2 id="注意要点"><a href="#注意要点" class="headerlink" title="注意要点"></a>注意要点</h2><p><strong>distinct关键字：</strong>作用于所有的列，不仅仅是跟在其后的那一列。eg: select distinct vend_id,prod_price from products;  </p>
<p>除非指定的两列完全相同，否则所有的列都会被检索出来。</p>
<p><strong>order by 子句的位置</strong>：必须是语句中最后一条的句子，否则会输出错误信息；order by 位于where之后</p>
<p><strong>何时使用引号：</strong>单引号用来限制字符串。 将数值与字符串进行比较，就需要限定引号。</p>
<p><strong>in：</strong>where子句中用来指定要匹配值的清单关键字，功能与or相同</p>
<p><strong>通配符：</strong></p>
<p>1有一种情况吧通配符放在搜索模式的中间很有用，根据邮件地址的一部分来查找电子邮件eg：WHERE email like ‘b%@forta.com’</p>
<p>2通配符%不可以匹配null值</p>
<p>3 不要过度使用通配符，尽量不要把它们放在搜索模式的开始处（导致搜索慢），要注意位置，否则会报错</p>
<p><strong>计算字段</strong></p>
<p><strong>trim（）：去掉两边的空格  rtrim ltrim 右和左</strong></p>
<p>select concat（x, ‘(‘, y, ‘)’) as z from X order by x;  as最好使用它</p>
<p><strong>常用的文本处理函数</strong></p>
<p>soundex ：将任何文本串转化为描述其语音表示的字母数字模式算法</p>
<p>avg函数忽略null 的行</p>
<p>count函数 ：count（*）对行中所有的书进行计算，不管是包含的还是空值  count（）则忽略</p>
<p>distinct不能用于count（*）  必须使用列名 不能用于计算或表达式</p>
<p><strong>别名：</strong>在指定别名以包含某个聚集函数的结果时，不应该使用表中的实际列名；表别名只在查询中使用，与列别名不一样，表别名不返回到客户机</p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p> 感谢你的阅读，祝你在 MySQL 的学习和实践中取得更大的成功！  让我们在 MySQL 的海洋中探索更多、学习更多^_^</p>

            </div>
            <hr />

            
            <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">您小小的支持，是我不断前进的动力❤</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            

    <div class="reprint" id="reprint-statement">
        <p class="reprint-tip">
            <i class="fa fa-exclamation-triangle"></i>&nbsp;&nbsp;
            <span>转载规则</span>
        </p>
        
            <div class="center-align">
                <a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.zh">
                    <img alt=""
                         style="border-width:0"
                         src="https://i.creativecommons.org/l/by/4.0/88x31.png"/>
                </a>
            </div>
            <br/>
            <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text"
                  property="dct:title" rel="dct:type">
                    《[两万字教程]MYSQL必知必会一站式完全教程》
                </span> 由
            <a xmlns:cc="http://creativecommons.org/ns#" href="/shu-ju-fen-xi-liang-wan-zi-jiao-cheng-mysql-bi-zhi-bi-hui.html" property="cc:attributionName"
               rel="cc:attributionURL">
                Bevis23
            </a> 采用
            <a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.zh">
                知识共享署名 4.0 国际许可协议
            </a>进行许可。
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>


        </div>
    </div>

    
    <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: 'test',
        clientSecret: 'test',
        repo: 'Bevis23.github.io',
        owner: 'Bevis23',
        admin: "Bevis23",
        id: 'shu-ju-fen-xi-liang-wan-zi-jiao-cheng-mysql-bi-zhi-bi-hui.html',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    
    <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments input[type=text],
    #vcomments input[type=email],
    #vcomments input[type=url],
    #vcomments textarea {
        box-sizing: border-box;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #42b983;
        font-weight: 500;
        text-decoration: underline;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div id="vcomments" class="card-content"></div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<!-- <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script> -->

<script>
    new Valine({
        el: '#vcomments',
        appId: '查教程获取',
        appKey: '查教程获取',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'false' === 'true',
        avatar: 'wavatar',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: '如果你没有GitHub账号，还可以在这里评论啦！'
    });
</script>

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/shen-tou-zhu-dong-xin-xi-shou-ji.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/20.jpg" class="responsive-img" alt="渗透-主动信息收集">
                        
                        <span class="card-title">渗透-主动信息收集</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            主动信息收集什么是主动信息收集主动信息收集指的是主体根据自身需求和目标，通过主动搜集、查询、调查等方式，积极主动地获取所需的信息。在主动信息收集中，个体或组织作为信息的主动者，主动发起搜索和查询行为，以获得所需的有用信息 
主动信息收集的原
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2023-07-15
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/网络安全/" class="post-category" target="_blank">
                                    网络安全
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/网络安全/" target="_blank">
                        <span class="chip bg-color">网络安全</span>
                    </a>
                    
                    <a href="/tags/技术分享/" target="_blank">
                        <span class="chip bg-color">技术分享</span>
                    </a>
                    
                    <a href="/tags/渗透测试/" target="_blank">
                        <span class="chip bg-color">渗透测试</span>
                    </a>
                    
                    <a href="/tags/OSI/" target="_blank">
                        <span class="chip bg-color">OSI</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/ji-zhu-fen-xiang-frp-nei-wang-chuan-tou.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/8.jpg" class="responsive-img" alt="frp内网穿透：打开局域网的远程大门">
                        
                        <span class="card-title">frp内网穿透：打开局域网的远程大门</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            引言在现代科技发展的背景下，越来越多的人需要远程访问他们家庭或办公室网络中的设备。然而，由于网络安全限制，我们常常无法直接从外部访问局域网中的设备。这就是为什么内网穿透技术变得如此重要的原因。本文将向您介绍一种强大的内网穿透工具——frp，
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2023-07-06
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/技术分享/" class="post-category" target="_blank">
                                    技术分享
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/工具/" target="_blank">
                        <span class="chip bg-color">工具</span>
                    </a>
                    
                    <a href="/tags/网络安全/" target="_blank">
                        <span class="chip bg-color">网络安全</span>
                    </a>
                    
                    <a href="/tags/技术分享/" target="_blank">
                        <span class="chip bg-color">技术分享</span>
                    </a>
                    
                    <a href="/tags/frp/" target="_blank">
                        <span class="chip bg-color">frp</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: Bevis23's Blog<br />'
            + '作者: Bevis23<br />'
            + '链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () { bodyElement.removeChild(newdiv); }, 200);
    });
</script>

    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fa fa-list"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(500);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(500);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>
    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>

<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>
<!-- 代码语言 -->
<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>
<!-- 代码块复制 -->
<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>
<script type="text/javascript" src="/libs/codeBlock/clipboard.min.js"></script>
<!-- 代码块收缩 -->
<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script> 
<!-- 代码块折行 -->
<style type="text/css">code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }</style>


    <!-- 不蒜子与看板娘冲突问题在于其中span -->
<footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            &copy; Bevis23. 版权所有

            
            &nbsp;<i class="fa fa-area-chart"></i>&nbsp;站点总字数:&nbsp;
            <span class="white-color">64k</span>
            

            <br>
            <span id="sitetime"></span>

            
            
            <br>
            
            
                <i class="fa fa-heart-o"></i>
                本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>
            
            
            
            
                人次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.
            
            
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/Bevis23" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:miyi23seek@outlook.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>





    <a href="http://wpa.qq.com/msgrd?v=3&uin=2217934615&site=qq&menu=yes" class="tooltipped" target="_blank" data-tooltip="访问我的知乎" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>





    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>


</div>
    </div>
</footer>

<div class="progress-bar"></div>

<!-- 不蒜子计数初始值纠正 -->
<script>
    $(document).ready(function () {

        var int = setInterval(fixCount, 50);
        var pvcountOffset = 0;
        var uvcountOffset = 0;

        function fixCount() {
            if (document.getElementById("busuanzi_container_site_pv").style.display != "none") {
                $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + pvcountOffset);
                clearInterval(int);
            }
            if ($("#busuanzi_container_site_pv").css("display") != "none") {
                $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + uvcountOffset); // 加上初始数据 
                clearInterval(int);
            }
        }
    });
</script>

<script language=javascript>
    function siteTime() {
        window.setTimeout("siteTime()", 1000);
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();
        /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
        year - 作为date对象的年份，为4位年份值
        month - 0-11之间的整数，做为date对象的月份
        day - 1-31之间的整数，做为date对象的天数
        hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
        minutes - 0-59之间的整数，做为date对象的分钟数
        seconds - 0-59之间的整数，做为date对象的秒数
        microseconds - 0-999之间的整数，做为date对象的毫秒数 */
        var t1 = Date.UTC(2023, 05, 24, 00, 00, 00); //北京时间2023-5-24 00:00:00
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);
        document.getElementById("sitetime").innerHTML = "本站已运行 " + diffYears + " 年 " + diffDays + " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
    }/*因为建站时间还没有一年，就将之注释掉了。需要的可以取消*/
    siteTime();
</script>

    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>

    <!-- 白天和黑夜主题 -->
<div class="sum-moon-box">
  <a class="btn-floating btn-large waves-effect waves-light" onclick="switchNightMode()" title="切换主题" >
    <i id="sum-moon-icon" class="material-icons" style="width:48px; height:48px; font-size: 28px;">切换</i>
  </a>
</div>


<script>
  function switchNightMode() {
    $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
      setTimeout(function () {
        $('body').hasClass('DarkMode') 
        ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
        : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
          
        setTimeout(function () {
          $('.Cuteen_DarkSky').fadeOut(1e3, function () {
            $(this).remove()
          })
        }, 2e3)
      })
  }
</script>

<div class="stars-con">
  <div id="stars"></div>
  <div id="stars2"></div>
  <div id="stars3"></div>  
</div>
    
<script>
    
    if (localStorage.getItem('isDark') === '1') {
        document.body.classList.add('DarkMode');
        $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')
    } else {
        document.body.classList.remove('DarkMode');
        $('#sum-moon-icon').removeleClass("fa-sun").addClass('fa-moon')
    }
</script>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <script type="text/javascript"> var OriginTitile = document.title, st; document.addEventListener("visibilitychange", function () { document.hidden ? (document.title = "你别走呀 (。•́︿•̀。)", clearTimeout(st)) : (document.title = "你来啦!（＾ω＾）", st = setTimeout(function () { document.title = OriginTitile }, 3e3)) })  
    </script>

<!-- 天气插件 -->
<div id="he-plugin-simple"></div>
<script>
WIDGET = {
  "CONFIG": {
    "modules": "01234",
    "background": "5",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "FFFFFF",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "50px 10px 10px 10px",
    "shadow": "1",
    "language": "zh",
    "borderRadius": "15",
    "fixed": "true",
    "vertical": "left",
    "horizontal": "right",
    "left": "0",
    "top": "40",
    "key": "648bb6c32e814644963b9fe24983e27e"
  }
}
</script>
<script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script>


<!--动态线条背景-->
<script type="text/javascript"
color="220,220,220" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
</script>



    <!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id=查教程获取"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', '查教程获取');
</script>



    
    <script src="/libs/others/clicklove.js"></script>
    

    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    <!-- 雪花特效 -->
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":230,"height":280,"hOffset":50,"vOffset":-5},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>

</html>